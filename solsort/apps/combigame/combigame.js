// vim: ts=4 sts=4 sw=4 expandtab
// -- kriskowal Kris Kowal Copyright (C) 2009-2011 MIT License
// -- tlrobinson Tom Robinson Copyright (C) 2009-2010 MIT License (Narwhal Project)
// -- dantman Daniel Friesen Copyright (C) 2010 XXX TODO License or CLA
// -- fschaefer Florian Schäfer Copyright (C) 2010 MIT License
// -- Gozala Irakli Gozalishvili Copyright (C) 2010 MIT License
// -- kitcambridge Kit Cambridge Copyright (C) 2011 MIT License
// -- kossnocorp Sasha Koss XXX TODO License or CLA
// -- bryanforbes Bryan Forbes XXX TODO License or CLA
// -- killdream Quildreen Motta Copyright (C) 2011 MIT Licence
// -- michaelficarra Michael Ficarra Copyright (C) 2011 3-clause BSD License
// -- sharkbrainguy Gerard Paapu Copyright (C) 2011 MIT License
// -- bbqsrc Brendan Molloy (C) 2011 Creative Commons Zero (public domain)
// -- iwyg XXX TODO License or CLA
// -- DomenicDenicola Domenic Denicola Copyright (C) 2011 MIT License
// -- xavierm02 Montillet Xavier Copyright (C) 2011 MIT License
// -- Raynos Jake Verbaten Copyright (C) 2011 MIT Licence
// -- samsonjs Sami Samhuri Copyright (C) 2010 MIT License
// -- rwldrn Rick Waldron Copyright (C) 2011 MIT License
// -- lexer Alexey Zakharov XXX TODO License or CLA
/*!
    Copyright (c) 2009, 280 North Inc. http://280north.com/
    MIT License. http://github.com/280north/narwhal/blob/master/README.md
*/// Module systems magic dance
(function(a){typeof define=="function"?define(a):a()})(function(){function m(a){try{return Object.defineProperty(a,"sentinel",{}),"sentinel"in a}catch(b){}}Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError("Function.prototype.bind called on incompatible "+c);var e=d.call(arguments,1),f=function(){if(this instanceof f){var a=function(){};a.prototype=c.prototype;var g=new a,h=c.apply(g,e.concat(d.call(arguments)));return Object(h)===h?h:g}return c.apply(b,e.concat(d.call(arguments)))};return f});var a=Function.prototype.call,b=Array.prototype,c=Object.prototype,d=b.slice,e=a.bind(c.toString),f=a.bind(c.hasOwnProperty),g,h,i,j,k;if(k=f(c,"__defineGetter__"))g=a.bind(c.__defineGetter__),h=a.bind(c.__defineSetter__),i=a.bind(c.__lookupGetter__),j=a.bind(c.__lookupSetter__);Array.isArray||(Array.isArray=function(b){return e(b)=="[object Array]"}),Array.prototype.forEach||(Array.prototype.forEach=function(b){var c=D(this),d=arguments[1],f=-1,g=c.length>>>0;if(e(b)!="[object Function]")throw new TypeError;while(++f<g)f in c&&b.call(d,c[f],f,c)}),Array.prototype.map||(Array.prototype.map=function(b){var c=D(this),d=c.length>>>0,f=Array(d),g=arguments[1];if(e(b)!="[object Function]")throw new TypeError(b+" is not a function");for(var h=0;h<d;h++)h in c&&(f[h]=b.call(g,c[h],h,c));return f}),Array.prototype.filter||(Array.prototype.filter=function(b){var c=D(this),d=c.length>>>0,f=[],g,h=arguments[1];if(e(b)!="[object Function]")throw new TypeError(b+" is not a function");for(var i=0;i<d;i++)i in c&&(g=c[i],b.call(h,g,i,c)&&f.push(g));return f}),Array.prototype.every||(Array.prototype.every=function(b){var c=D(this),d=c.length>>>0,f=arguments[1];if(e(b)!="[object Function]")throw new TypeError(b+" is not a function");for(var g=0;g<d;g++)if(g in c&&!b.call(f,c[g],g,c))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(b){var c=D(this),d=c.length>>>0,f=arguments[1];if(e(b)!="[object Function]")throw new TypeError(b+" is not a function");for(var g=0;g<d;g++)if(g in c&&b.call(f,c[g],g,c))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(b){var c=D(this),d=c.length>>>0;if(e(b)!="[object Function]")throw new TypeError(b+" is not a function");if(!d&&arguments.length==1)throw new TypeError("reduce of empty array with no initial value");var f=0,g;if(arguments.length>=2)g=arguments[1];else do{if(f in c){g=c[f++];break}if(++f>=d)throw new TypeError("reduce of empty array with no initial value")}while(!0);for(;f<d;f++)f in c&&(g=b.call(void 0,g,c[f],f,c));return g}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(b){var c=D(this),d=c.length>>>0;if(e(b)!="[object Function]")throw new TypeError(b+" is not a function");if(!d&&arguments.length==1)throw new TypeError("reduceRight of empty array with no initial value");var f,g=d-1;if(arguments.length>=2)f=arguments[1];else do{if(g in c){f=c[g--];break}if(--g<0)throw new TypeError("reduceRight of empty array with no initial value")}while(!0);do g in this&&(f=b.call(void 0,f,c[g],g,c));while(g--);return f}),Array.prototype.indexOf||(Array.prototype.indexOf=function(b){var c=D(this),d=c.length>>>0;if(!d)return-1;var e=0;arguments.length>1&&(e=B(arguments[1])),e=e>=0?e:Math.max(0,d+e);for(;e<d;e++)if(e in c&&c[e]===b)return e;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(b){var c=D(this),d=c.length>>>0;if(!d)return-1;var e=d-1;arguments.length>1&&(e=Math.min(e,B(arguments[1]))),e=e>=0?e:d-Math.abs(e);for(;e>=0;e--)if(e in c&&b===c[e])return e;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(b){return b.__proto__||(b.constructor?b.constructor.prototype:c)});if(!Object.getOwnPropertyDescriptor){var l="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(b,d){if(typeof b!="object"&&typeof b!="function"||b===null)throw new TypeError(l+b);if(!f(b,d))return;var e={enumerable:!0,configurable:!0};if(k){var g=b.__proto__;b.__proto__=c;var h=i(b,d),m=j(b,d);b.__proto__=g;if(h||m)return h&&(e.get=h),m&&(e.set=m),e}return e.value=b[d],e}}Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(b){return Object.keys(b)}),Object.create||(Object.create=function(b,c){var d;if(b===null)d={__proto__:null};else{if(typeof b!="object")throw new TypeError("typeof prototype["+typeof b+"] != 'object'");var e=function(){};e.prototype=b,d=new e,d.__proto__=b}return c!==void 0&&Object.defineProperties(d,c),d});if(Object.defineProperty){var n=m({}),o=typeof document=="undefined"||m(document.createElement("div"));if(!n||!o)var p=Object.defineProperty}if(!Object.defineProperty||p){var q="Property description must be an object: ",r="Object.defineProperty called on non-object: ",s="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(b,d,e){if(typeof b!="object"&&typeof b!="function"||b===null)throw new TypeError(r+b);if(typeof e!="object"&&typeof e!="function"||e===null)throw new TypeError(q+e);if(p)try{return p.call(Object,b,d,e)}catch(l){}if(f(e,"value"))if(k&&(i(b,d)||j(b,d))){var m=b.__proto__;b.__proto__=c,delete b[d],b[d]=e.value,b.__proto__=m}else b[d]=e.value;else{if(!k)throw new TypeError(s);f(e,"get")&&g(b,d,e.get),f(e,"set")&&h(b,d,e.set)}return b}}Object.defineProperties||(Object.defineProperties=function(b,c){for(var d in c)f(c,d)&&d!="__proto__"&&Object.defineProperty(b,d,c[d]);return b}),Object.seal||(Object.seal=function(b){return b}),Object.freeze||(Object.freeze=function(b){return b});try{Object.freeze(function(){})}catch(t){Object.freeze=function(b){return function(c){return typeof c=="function"?c:b(c)}}(Object.freeze)}Object.preventExtensions||(Object.preventExtensions=function(b){return b}),Object.isSealed||(Object.isSealed=function(b){return!1}),Object.isFrozen||(Object.isFrozen=function(b){return!1}),Object.isExtensible||(Object.isExtensible=function(b){if(Object(b)===b)throw new TypeError;var c="";while(f(b,c))c+="?";b[c]=!0;var d=f(b,c);return delete b[c],d});if(!Object.keys){var u=!0,v=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],w=v.length;for(var x in{toString:null})u=!1;Object.keys=function E(a){if(typeof a!="object"&&typeof a!="function"||a===null)throw new TypeError("Object.keys called on a non-object");var E=[];for(var b in a)f(a,b)&&E.push(b);if(u)for(var c=0,d=w;c<d;c++){var e=v[c];f(a,e)&&E.push(e)}return E}}if(!Date.prototype.toISOString||(new Date(-621987552e5)).toISOString().indexOf("-000001")===-1)Date.prototype.toISOString=function(){var b,c,d,e;if(!isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");b=[this.getUTCMonth()+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()],e=this.getUTCFullYear(),e=(e<0?"-":e>9999?"+":"")+("00000"+Math.abs(e)).slice(0<=e&&e<=9999?-4:-6),c=b.length;while(c--)d=b[c],d<10&&(b[c]="0"+d);return e+"-"+b.slice(0,2).join("-")+"T"+b.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"};Date.now||(Date.now=function(){return(new Date).getTime()}),Date.prototype.toJSON||(Date.prototype.toJSON=function(b){if(typeof this.toISOString!="function")throw new TypeError("toISOString property is not callable");return this.toISOString()});if(!Date.parse||Date.parse("+275760-09-13T00:00:00.000Z")!==864e13)Date=function(a){var b=function e(b,c,d,f,g,h,i){var j=arguments.length;if(this instanceof a){var k=j==1&&String(b)===b?new a(e.parse(b)):j>=7?new a(b,c,d,f,g,h,i):j>=6?new a(b,c,d,f,g,h):j>=5?new a(b,c,d,f,g):j>=4?new a(b,c,d,f):j>=3?new a(b,c,d):j>=2?new a(b,c):j>=1?new a(b):new a;return k.constructor=e,k}return a.apply(this,arguments)},c=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:\\.(\\d{3}))?)?(?:Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$");for(var d in a)b[d]=a[d];return b.now=a.now,b.UTC=a.UTC,b.prototype=a.prototype,b.prototype.constructor=b,b.parse=function(d){var e=c.exec(d);if(e){e.shift();for(var f=1;f<7;f++)e[f]=+(e[f]||(f<3?1:0)),f==1&&e[f]--;var g=+e.pop(),h=+e.pop(),i=e.pop(),j=0;if(i){if(h>23||g>59)return NaN;j=(h*60+g)*6e4*(i=="+"?-1:1)}var k=+e[0];return 0<=k&&k<=99?(e[0]=k+400,a.UTC.apply(this,e)+j-126227808e5):a.UTC.apply(this,e)+j}return a.parse.apply(this,arguments)},b}(Date);var y="\t\n\f\r   ᠎             　\u2028\u2029﻿";if(!String.prototype.trim||y.trim()){y="["+y+"]";var z=new RegExp("^"+y+y+"*"),A=new RegExp(y+y+"*$");String.prototype.trim=function(){if(this===undefined||this===null)throw new TypeError("can't convert "+this+" to object");return String(this).replace(z,"").replace(A,"")}}var B=function(a){return a=+a,a!==a?a=0:a!==0&&a!==1/0&&a!==-Infinity&&(a=(a>0||-1)*Math.floor(Math.abs(a))),a},C="a"[0]!="a",D=function(a){if(a==null)throw new TypeError("can't convert "+a+" to object");return C&&typeof a=="string"&&a?a.split(""):Object(a)}});
//     Zepto.js
//     (c) 2010, 2011 Thomas Fuchs
//     Zepto.js may be freely distributed under the MIT license.
(function(a){String.prototype.trim===a&&(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),Array.prototype.reduce===a&&(Array.prototype.reduce=function(b){if(this===void 0||this===null)throw new TypeError;var c=Object(this),d=c.length>>>0,e=0,f;if(typeof b!="function")throw new TypeError;if(d==0&&arguments.length==1)throw new TypeError;if(arguments.length>=2)f=arguments[1];else do{if(e in c){f=c[e++];break}if(++e>=d)throw new TypeError}while(!0);while(e<d)e in c&&(f=b.call(a,f,c[e],e,c)),e++;return f})})();var Zepto=function(){function v(a){return{}.toString.call(a)=="[object Function]"}function w(a){return a instanceof Object}function x(a){return a instanceof Array}function y(a){return typeof a.length=="number"}function z(b){return b.filter(function(b){return b!==a&&b!==null})}function A(a){return a.length>0?[].concat.apply([],a):a}function B(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})}function C(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function D(a){return a.filter(function(a,b,c){return c.indexOf(a)==b})}function E(a){return a in i?i[a]:i[a]=new RegExp("(^|\\s)"+a+"(\\s|$)")}function F(a,b){return typeof b=="number"&&!k[C(a)]?b+"px":b}function G(a){var b,c;return h[a]||(b=g.createElement(a),g.body.appendChild(b),c=j(b,"").getPropertyValue("display"),b.parentNode.removeChild(b),c=="none"&&(c="block"),h[a]=c),h[a]}function H(b,c){c===a&&l.test(b)&&RegExp.$1,c in q||(c="*");var d=q[c];return d.innerHTML=""+b,f.call(d.childNodes)}function I(a,b){return a=a||e,a.__proto__=I.prototype,a.selector=b||"",a}function J(b,d){if(!b)return I();if(d!==a)return J(d).find(b);if(v(b))return J(g).ready(b);if(b instanceof I)return b;var e;return x(b)?e=z(b):m.indexOf(b.nodeType)>=0||b===window?(e=[b],b=null):l.test(b)?(e=H(b.trim(),RegExp.$1),b=null):b.nodeType&&b.nodeType==3?e=[b]:e=c(g,b),I(e,b)}function K(b,c){return c===a?J(b):J(b).filter(c)}function L(a,b,c,d){return v(b)?b.call(a,c,d):b}function M(a,b,c){var d=a%2?b:b.parentNode;d&&d.insertBefore(c,a?a==1?d.firstChild:a==2?b:null:b.nextSibling)}function N(a,b){b(a);for(var c in a.childNodes)N(a.childNodes[c],b)}var a,b,c,d,e=[],f=e.slice,g=window.document,h={},i={},j=g.defaultView.getComputedStyle,k={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},l=/^\s*<(\w+)[^>]*>/,m=[1,9,11],n=["after","prepend","before","append"],o=g.createElement("table"),p=g.createElement("tr"),q={tr:g.createElement("tbody"),tbody:o,thead:o,tfoot:o,td:p,th:p,"*":g.createElement("div")},r=/complete|loaded|interactive/,s=/^\.([\w-]+)$/,t=/^#([\w-]+)$/,u=/^[\w-]+$/;return J.extend=function(a){return f.call(arguments,1).forEach(function(c){for(b in c)a[b]=c[b]}),a},J.qsa=c=function(a,b){var c;return a===g&&t.test(b)?(c=a.getElementById(RegExp.$1))?[c]:e:f.call(s.test(b)?a.getElementsByClassName(RegExp.$1):u.test(b)?a.getElementsByTagName(b):a.querySelectorAll(b))},J.isFunction=v,J.isObject=w,J.isArray=x,J.map=function(a,b){var c,d=[],e,f;if(y(a))for(e=0;e<a.length;e++)c=b(a[e],e),c!=null&&d.push(c);else for(f in a)c=b(a[f],f),c!=null&&d.push(c);return A(d)},J.each=function(a,b){var c,d;if(y(a)){for(c=0;c<a.length;c++)if(b(c,a[c])===!1)return a}else for(d in a)if(b(d,a[d])===!1)return a;return a},J.fn={forEach:e.forEach,reduce:e.reduce,push:e.push,indexOf:e.indexOf,concat:e.concat,map:function(a){return J.map(this,function(b,c){return a.call(b,c,b)})},slice:function(){return J(f.apply(this,arguments))},ready:function(a){return r.test(g.readyState)?a(J):g.addEventListener("DOMContentLoaded",function(){a(J)},!1),this},get:function(b){return b===a?this:this[b]},size:function(){return this.length},remove:function(){return this.each(function(){this.parentNode!=null&&this.parentNode.removeChild(this)})},each:function(a){return this.forEach(function(b,c){a.call(b,c,b)}),this},filter:function(a){return J([].filter.call(this,function(b){return b.parentNode&&c(b.parentNode,a).indexOf(b)>=0}))},end:function(){return this.prevObject||J()},andSelf:function(){return this.add(this.prevObject||J())},add:function(a,b){return J(D(this.concat(J(a,b))))},is:function(a){return this.length>0&&J(this[0]).filter(a).length>0},not:function(b){var c=[];if(v(b)&&b.call!==a)this.each(function(a){b.call(this,a)||c.push(this)});else{var d=typeof b=="string"?this.filter(b):y(b)&&v(b.item)?f.call(b):J(b);this.forEach(function(a){d.indexOf(a)<0&&c.push(a)})}return J(c)},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)},first:function(){var a=this[0];return a&&!w(a)?a:J(a)},last:function(){var a=this[this.length-1];return a&&!w(a)?a:J(a)},find:function(a){var b;return this.length==1?b=c(this[0],a):b=this.map(function(){return c(this,a)}),J(b)},closest:function(a,b){var d=this[0],e=c(b||g,a);e.length||(d=null);while(d&&e.indexOf(d)<0)d=d!==b&&d!==g&&d.parentNode;return J(d)},parents:function(a){var b=[],c=this;while(c.length>0)c=J.map(c,function(a){if((a=a.parentNode)&&a!==g&&b.indexOf(a)<0)return b.push(a),a});return K(b,a)},parent:function(a){return K(D(this.pluck("parentNode")),a)},children:function(a){return K(this.map(function(){return f.call(this.children)}),a)},siblings:function(a){return K(this.map(function(a,b){return f.call(b.parentNode.children).filter(function(a){return a!==b})}),a)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(a){return this.map(function(){return this[a]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=null),j(this,"").getPropertyValue("display")=="none"&&(this.style.display=G(this.nodeName))})},replaceWith:function(a){return this.each(function(){J(this).before(a).remove()})},wrap:function(a){return this.each(function(){J(this).wrapAll(J(a)[0].cloneNode(!1))})},wrapAll:function(a){return this[0]&&(J(this[0]).before(a=J(a)),a.append(this)),this},unwrap:function(){return this.parent().each(function(){J(this).replaceWith(J(this).children())}),this},hide:function(){return this.css("display","none")},toggle:function(b){return(b===a?this.css("display")=="none":b)?this.show():this.hide()},prev:function(){return J(this.pluck("previousElementSibling"))},next:function(){return J(this.pluck("nextElementSibling"))},html:function(b){return b===a?this.length>0?this[0].innerHTML:null:this.each(function(a){var c=this.innerHTML;J(this).empty().append(L(this,b,a,c))})},text:function(b){return b===a?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=b})},attr:function(c,d){var e;return typeof c=="string"&&d===a?this.length==0?a:c=="value"&&this[0].nodeName=="INPUT"?this.val():!(e=this[0].getAttribute(c))&&c in this[0]?this[0][c]:e:this.each(function(a){if(w(c))for(b in c)this.setAttribute(b,c[b]);else this.setAttribute(c,L(this,d,a,this.getAttribute(c)))})},removeAttr:function(a){return this.each(function(){this.removeAttribute(a)})},data:function(a,b){return this.attr("data-"+a,b)},val:function(b){return b===a?this.length>0?this[0].value:null:this.each(function(a){this.value=L(this,b,a,this.value)})},offset:function(){if(this.length==0)return null;var a=this[0].getBoundingClientRect();return{left:a.left+window.pageXOffset,top:a.top+window.pageYOffset,width:a.width,height:a.height}},css:function(c,d){if(d===a&&typeof c=="string")return this.length==0?a:this[0].style[B(c)]||j(this[0],"").getPropertyValue(c);var e="";for(b in c)e+=C(b)+":"+F(b,c[b])+";";return typeof c=="string"&&(e=C(c)+":"+F(c,d)),this.each(function(){this.style.cssText+=";"+e})},index:function(a){return a?this.indexOf(J(a)[0]):this.parent().children().indexOf(this[0])},hasClass:function(a){return this.length<1?!1:E(a).test(this[0].className)},addClass:function(a){return this.each(function(b){d=[];var c=this.className,e=L(this,a,b,c);e.split(/\s+/g).forEach(function(a){J(this).hasClass(a)||d.push(a)},this),d.length&&(this.className+=(c?" ":"")+d.join(" "))})},removeClass:function(b){return this.each(function(c){if(b===a)return this.className="";d=this.className,L(this,b,c,d).split(/\s+/g).forEach(function(a){d=d.replace(E(a)," ")}),this.className=d.trim()})},toggleClass:function(b,c){return this.each(function(d){var e=L(this,b,d,this.className);(c===a?!J(this).hasClass(e):c)?J(this).addClass(e):J(this).removeClass(e)})}},"filter,add,not,eq,first,last,find,closest,parents,parent,children,siblings".split(",").forEach(function(a){var b=J.fn[a];J.fn[a]=function(){var a=b.apply(this,arguments);return a.prevObject=this,a}}),["width","height"].forEach(function(b){J.fn[b]=function(c){var d,e=b.replace(/./,function(a){return a[0].toUpperCase()});return c===a?this[0]==window?window["inner"+e]:this[0]==g?g.documentElement["offset"+e]:(d=this.offset())&&d[b]:this.each(function(a){var d=J(this);d.css(b,L(this,c,a,d[b]()))})}}),n.forEach(function(a,b){J.fn[a]=function(a){var c=w(a)?a:H(a);if(!("length"in c)||c.nodeType)c=[c];if(c.length<1)return this;var d=this.length,e=d>1,f=b<2;return this.each(function(a,g){for(var h=0;h<c.length;h++){var i=c[f?c.length-h-1:h];N(i,function(a){a.nodeName!=null&&a.nodeName.toUpperCase()==="SCRIPT"&&(!a.type||a.type==="text/javascript")&&window.eval.call(window,a.innerHTML)}),e&&a<d-1&&(i=i.cloneNode(!0)),M(b,g,i)}})};var c=b%2?a+"To":"insert"+(b?"Before":"After");J.fn[c]=function(b){return J(b)[a](this),this}}),I.prototype=J.fn,J}();window.Zepto=Zepto,"$"in window||(window.$=Zepto),function(a){function f(a){return a._zid||(a._zid=d++)}function g(a,b,d,e){b=h(b);if(b.ns)var g=i(b.ns);return(c[f(a)]||[]).filter(function(a){return a&&(!b.e||a.e==b.e)&&(!b.ns||g.test(a.ns))&&(!d||a.fn==d)&&(!e||a.sel==e)})}function h(a){var b=(""+a).split(".");return{e:b[0],ns:b.slice(1).sort().join(" ")}}function i(a){return new RegExp("(?:^| )"+a.replace(" "," .* ?")+"(?: |$)")}function j(b,c,d){a.isObject(b)?a.each(b,d):b.split(/\s/).forEach(function(a){d(a,c)})}function k(b,d,e,g,i){var k=f(b),l=c[k]||(c[k]=[]);j(d,e,function(c,d){var e=i&&i(d,c),f=e||d,j=function(a){var c=f.apply(b,[a].concat(a.data));return c===!1&&a.preventDefault(),c},k=a.extend(h(c),{fn:d,proxy:j,sel:g,del:e,i:l.length});l.push(k),b.addEventListener(k.e,j,!1)})}function l(a,b,d,e){var h=f(a);j(b||"",d,function(b,d){g(a,b,d,e).forEach(function(b){delete c[h][b.i],a.removeEventListener(b.e,b.proxy,!1)})})}function p(b){var c=a.extend({originalEvent:b},b);return a.each(o,function(a,d){c[a]=function(){return this[d]=m,b[a].apply(b,arguments)},c[d]=n}),c}function q(a){if(!("defaultPrevented"in a)){a.defaultPrevented=!1;var b=a.preventDefault;a.preventDefault=function(){this.defaultPrevented=!0,b.call(this)}}}var b=a.qsa,c={},d=1,e={};e.click=e.mousedown=e.mouseup=e.mousemove="MouseEvents",a.event={add:k,remove:l},a.fn.bind=function(a,b){return this.each(function(){k(this,a,b)})},a.fn.unbind=function(a,b){return this.each(function(){l(this,a,b)})},a.fn.one=function(a,b){return this.each(function(c,d){k(this,a,b,null,function(a,b){return function(){var c=a.apply(d,arguments);return l(d,b,a),c}})})};var m=function(){return!0},n=function(){return!1},o={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};a.fn.delegate=function(b,c,d){return this.each(function(e,f){k(f,c,d,b,function(c){return function(d){var e,g=a(d.target).closest(b,f).get(0);if(g)return e=a.extend(p(d),{currentTarget:g,liveFired:f}),c.apply(g,[e].concat([].slice.call(arguments,1)))}})})},a.fn.undelegate=function(a,b,c){return this.each(function(){l(this,b,c,a)})},a.fn.live=function(b,c){return a(document.body).delegate(this.selector,b,c),this},a.fn.die=function(b,c){return a(document.body).undelegate(this.selector,b,c),this},a.fn.on=function(b,c,d){return c===undefined||a.isFunction(c)?this.bind(b,c):this.delegate(c,b,d)},a.fn.off=function(b,c,d){return c===undefined||a.isFunction(c)?this.unbind(b,c):this.undelegate(c,b,d)},a.fn.trigger=function(b,c){return typeof b=="string"&&(b=a.Event(b)),q(b),b.data=c,this.each(function(){this.dispatchEvent(b)})},a.fn.triggerHandler=function(b,c){var d,e;return this.each(function(f,h){d=p(typeof b=="string"?a.Event(b):b),d.data=c,d.target=h,a.each(g(h,b.type||b),function(a,b){e=b.proxy(d);if(d.isImmediatePropagationStopped())return!1})}),e},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout change select keydown keypress keyup error".split(" ").forEach(function(b){a.fn[b]=function(a){return this.bind(b,a)}}),["focus","blur"].forEach(function(b){a.fn[b]=function(a){if(a)this.bind(b,a);else if(this.length)try{this.get(0)[b]()}catch(c){}return this}}),a.Event=function(a,b){var c=document.createEvent(e[a]||"Events"),d=!0;if(b)for(var f in b)f=="bubbles"?d=!!b[f]:c[f]=b[f];return c.initEvent(a,d,!0,null,null,null,null,null,null,null,null,null,null,null,null),c}}(Zepto),function(a){function b(a){var b=this.os={},c=this.browser={},d=a.match(/WebKit\/([\d.]+)/),e=a.match(/(Android)\s+([\d.]+)/),f=a.match(/(iPad).*OS\s([\d_]+)/),g=!f&&a.match(/(iPhone\sOS)\s([\d_]+)/),h=a.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),i=h&&a.match(/TouchPad/),j=a.match(/(BlackBerry).*Version\/([\d.]+)/);d&&(c.version=d[1]),c.webkit=!!d,e&&(b.android=!0,b.version=e[2]),g&&(b.ios=!0,b.version=g[2].replace(/_/g,"."),b.iphone=!0),f&&(b.ios=!0,b.version=f[2].replace(/_/g,"."),b.ipad=!0),h&&(b.webos=!0,b.version=h[2]),i&&(b.touchpad=!0),j&&(b.blackberry=!0,b.version=j[2])}b.call(a,navigator.userAgent),a.__detect=b}(Zepto),function(a,b){function k(a){return a.toLowerCase()}function l(a){return d?d+a:k(a)}var c="",d,e,f,g={Webkit:"webkit",Moz:"",O:"o",ms:"MS"},h=window.document,i=h.createElement("div"),j=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;a.each(g,function(a,e){if(i.style[a+"TransitionProperty"]!==b)return c="-"+k(a)+"-",d=e,!1}),a.fx={off:d===b&&i.style.transitionProperty===b,cssPrefix:c,transitionEnd:l("TransitionEnd"),animationEnd:l("AnimationEnd")},a.fn.animate=function(b,c,d,e){return a.isObject(c)&&(d=c.easing,e=c.complete,c=c.duration),c&&(c/=1e3),this.anim(b,c,d,e)},a.fn.anim=function(d,e,f,g){var h,i={},k,l=this,m,n=a.fx.transitionEnd;e===b&&(e=.4),a.fx.off&&(e=0);if(typeof d=="string")i[c+"animation-name"]=d,i[c+"animation-duration"]=e+"s",n=a.fx.animationEnd;else{for(k in d)j.test(k)?(h||(h=[]),h.push(k+"("+d[k]+")")):i[k]=d[k];h&&(i[c+"transform"]=h.join(" ")),a.fx.off||(i[c+"transition"]="all "+e+"s "+(f||""))}return m=function(){var b={};b[c+"transition"]=b[c+"animation-name"]="none",a(this).css(b),g&&g.call(this)},e>0&&this.one(n,m),setTimeout(function(){l.css(i),e<=0&&setTimeout(function(){l.each(function(){m.call(this)})},0)},0),this},i=null}(Zepto),function(a){function g(b,c,d){var e=a.Event(c);return a(b).trigger(e,d),!e.defaultPrevented}function h(a,b,c,e){if(a.global)return g(b||d,c,e)}function i(b){b.global&&a.active++===0&&h(b,null,"ajaxStart")}function j(b){b.global&&!--a.active&&h(b,null,"ajaxStop")}function k(a,b){var c=b.context;if(b.beforeSend.call(c,a,b)===!1||h(b,c,"ajaxBeforeSend",[a,b])===!1)return!1;h(b,c,"ajaxSend",[a,b])}function l(a,b,c){var d=c.context,e="success";c.success.call(d,a,e,b),h(c,d,"ajaxSuccess",[b,c,a]),n(e,b,c)}function m(a,b,c,d){var e=d.context;d.error.call(e,c,b,a),h(d,e,"ajaxError",[c,d,a]),n(b,c,d)}function n(a,b,c){var d=c.context;c.complete.call(d,b,a),h(c,d,"ajaxComplete",[b,c]),j(c)}function o(){}function q(b,d,e,f){var g=a.isArray(d);a.each(d,function(d,h){f&&(d=e?f:f+"["+(g?"":d)+"]"),!f&&g?b.add(h.name,h.value):(e?a.isArray(h):c(h))?q(b,h,e,d):b.add(d,h)})}var b=0,c=a.isObject,d=window.document,e,f;a.active=0,a.ajaxJSONP=function(c){var e="jsonp"+ ++b,f=d.createElement("script"),g=function(){a(f).remove(),e in window&&(window[e]=o),n(h,c,"abort")},h={abort:g},i;return window[e]=function(b){clearTimeout(i),a(f).remove(),delete window[e],l(b,h,c)},f.src=c.url.replace(/=\?/,"="+e),a("head").append(f),c.timeout>0&&(i=setTimeout(function(){h.abort(),n(h,c,"timeout")},c.timeout)),h},a.ajaxSettings={type:"GET",beforeSend:o,success:o,error:o,complete:o,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:"application/json",xml:"application/xml, text/xml",html:"text/html",text:"text/plain"},crossDomain:!1,timeout:0},a.ajax=function(b){var d=a.extend({},b||{});for(e in a.ajaxSettings)d[e]===undefined&&(d[e]=a.ajaxSettings[e]);i(d),d.crossDomain||(d.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(d.url)&&RegExp.$2!=window.location.host);if(/=\?/.test(d.url))return a.ajaxJSONP(d);d.url||(d.url=window.location.toString()),d.data&&!d.contentType&&(d.contentType="application/x-www-form-urlencoded"),c(d.data)&&(d.data=a.param(d.data));if(d.type.match(/get/i)&&d.data){var g=d.data;d.url.match(/\?.*=/)?g="&"+g:g[0]!="?"&&(g="?"+g),d.url+=g}var h=d.accepts[d.dataType],j={},n=/^([\w-]+:)\/\//.test(d.url)?RegExp.$1:window.location.protocol,p=a.ajaxSettings.xhr(),q;d.crossDomain||(j["X-Requested-With"]="XMLHttpRequest"),h&&(j.Accept=h),d.headers=a.extend(j,d.headers||{}),p.onreadystatechange=function(){if(p.readyState==4){clearTimeout(q);var a,b=!1;if(p.status>=200&&p.status<300||p.status==0&&n=="file:"){if(h=="application/json"&&!/^\s*$/.test(p.responseText))try{a=JSON.parse(p.responseText)}catch(c){b=c}else a=p.responseText;b?m(b,"parsererror",p,d):l(a,p,d)}else m(null,"error",p,d)}},p.open(d.type,d.url,!0),d.contentType&&(d.headers["Content-Type"]=d.contentType);for(f in d.headers)p.setRequestHeader(f,d.headers[f]);return k(p,d)===!1?(p.abort(),!1):(d.timeout>0&&(q=setTimeout(function(){p.onreadystatechange=o,p.abort(),m(null,"timeout",p,d)},d.timeout)),p.send(d.data),p)},a.get=function(b,c){return a.ajax({url:b,success:c})},a.post=function(b,c,d,e){return a.isFunction(c)&&(e=e||d,d=c,c=null),a.ajax({type:"POST",url:b,data:c,success:d,dataType:e})},a.getJSON=function(b,c){return a.ajax({url:b,success:c,dataType:"json"})},a.fn.load=function(b,c){if(!this.length)return this;var e=this,f=b.split(/\s/),g;return f.length>1&&(b=f[0],g=f[1]),a.get(b,function(b){e.html(g?a(d.createElement("div")).html(b).find(g).html():b),c&&c.call(e)}),this};var p=encodeURIComponent;a.param=function(a,b){var c=[];return c.add=function(a,b){this.push(p(a)+"="+p(b))},q(c,a,b),c.join("&").replace("%20","+")}}(Zepto),function(a){a.fn.serializeArray=function(){var b=[],c;return a(Array.prototype.slice.call(this.get(0).elements)).each(function(){c=a(this);var d=c.attr("type");!this.disabled&&d!="submit"&&d!="reset"&&d!="button"&&(d!="radio"&&d!="checkbox"||this.checked)&&b.push({name:c.attr("name"),value:c.val()})}),b},a.fn.serialize=function(){var a=[];return this.serializeArray().forEach(function(b){a.push(encodeURIComponent(b.name)+"="+encodeURIComponent(b.value))}),a.join("&")},a.fn.submit=function(b){if(b)this.bind("submit",b);else if(this.length){var c=a.Event("submit");this.eq(0).trigger(c),c.defaultPrevented||this.get(0).submit()}return this}}(Zepto),function(a){function d(a){return"tagName"in a?a:a.parentNode}function e(a,b,c,d){var e=Math.abs(a-b),f=Math.abs(c-d);return e>=f?a-b>0?"Left":"Right":c-d>0?"Up":"Down"}function g(){b.last&&Date.now()-b.last>=f&&(a(b.target).trigger("longTap"),b={})}var b={},c,f=750;a(document).ready(function(){a(document.body).bind("touchstart",function(a){var e=Date.now(),h=e-(b.last||e);b.target=d(a.touches[0].target),c&&clearTimeout(c),b.x1=a.touches[0].pageX,b.y1=a.touches[0].pageY,h>0&&h<=250&&(b.isDoubleTap=!0),b.last=e,setTimeout(g,f)}).bind("touchmove",function(a){b.x2=a.touches[0].pageX,b.y2=a.touches[0].pageY}).bind("touchend",function(d){b.isDoubleTap?(a(b.target).trigger("doubleTap"),b={}):b.x2>0||b.y2>0?((Math.abs(b.x1-b.x2)>30||Math.abs(b.y1-b.y2)>30)&&a(b.target).trigger("swipe")&&a(b.target).trigger("swipe"+e(b.x1,b.x2,b.y1,b.y2)),b.x1=b.x2=b.y1=b.y2=b.last=0):"last"in b&&(c=setTimeout(function(){c=null,a(b.target).trigger("tap"),b={}},250))}).bind("touchcancel",function(){b={}})}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","longTap"].forEach(function(b){a.fn[b]=function(a){return this.bind(b,a)}})}(Zepto)

/* Modernizr 2.5.3 (Custom Build) | MIT & BSD
 * Build: http://www.modernizr.com/download/#-boxshadow-touch-addtest-teststyles-testprop-testallprops-prefixes-domprefixes
 */
;window.Modernizr=function(a,b,c){function y(a){i.cssText=a}function z(a,b){return y(l.join(a+";")+(b||""))}function A(a,b){return typeof a===b}function B(a,b){return!!~(""+a).indexOf(b)}function C(a,b){for(var d in a)if(i[a[d]]!==c)return b=="pfx"?a[d]:!0;return!1}function D(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:A(f,"function")?f.bind(d||b):f}return!1}function E(a,b,c){var d=a.charAt(0).toUpperCase()+a.substr(1),e=(a+" "+n.join(d+" ")+d).split(" ");return A(b,"string")||A(b,"undefined")?C(e,b):(e=(a+" "+o.join(d+" ")+d).split(" "),D(e,b,c))}var d="2.5.3",e={},f=b.documentElement,g="modernizr",h=b.createElement(g),i=h.style,j,k={}.toString,l=" -webkit- -moz- -o- -ms- ".split(" "),m="Webkit Moz O ms",n=m.split(" "),o=m.toLowerCase().split(" "),p={},q={},r={},s=[],t=s.slice,u,v=function(a,c,d,e){var h,i,j,k=b.createElement("div"),l=b.body,m=l?l:b.createElement("body");if(parseInt(d,10))while(d--)j=b.createElement("div"),j.id=e?e[d]:g+(d+1),k.appendChild(j);return h=["&#173;","<style>",a,"</style>"].join(""),k.id=g,m.innerHTML+=h,m.appendChild(k),l||(m.style.background="",f.appendChild(m)),i=c(k,a),l?k.parentNode.removeChild(k):m.parentNode.removeChild(m),!!i},w={}.hasOwnProperty,x;!A(w,"undefined")&&!A(w.call,"undefined")?x=function(a,b){return w.call(a,b)}:x=function(a,b){return b in a&&A(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=t.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(t.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(t.call(arguments)))};return e});var F=function(c,d){var f=c.join(""),g=d.length;v(f,function(c,d){var f=b.styleSheets[b.styleSheets.length-1],h=f?f.cssRules&&f.cssRules[0]?f.cssRules[0].cssText:f.cssText||"":"",i=c.childNodes,j={};while(g--)j[i[g].id]=i[g];e.touch="ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch||(j.touch&&j.touch.offsetTop)===9},g,d)}([,["@media (",l.join("touch-enabled),("),g,")","{#touch{top:9px;position:absolute}}"].join("")],[,"touch"]);p.touch=function(){return e.touch},p.boxshadow=function(){return E("boxShadow")};for(var G in p)x(p,G)&&(u=G.toLowerCase(),e[u]=p[G](),s.push((e[u]?"":"no-")+u));return e.addTest=function(a,b){if(typeof a=="object")for(var d in a)x(a,d)&&e.addTest(d,a[d]);else{a=a.toLowerCase();if(e[a]!==c)return e;b=typeof b=="function"?b():b,f.className+=" "+(b?"":"no-")+a,e[a]=b}return e},y(""),h=j=null,e._version=d,e._prefixes=l,e._domPrefixes=o,e._cssomPrefixes=n,e.testProp=function(a){return C([a])},e.testAllProps=E,e.testStyles=v,e}(this,this.document);

// Underscore.js 1.3.1
// (c) 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
// Underscore is freely distributable under the MIT license.
// http://documentcloud.github.com/underscore
(function(){function q(a,c,d){if(a===c)return a!==0||1/a==1/c;if(a==null||c==null)return a===c;if(a._chain)a=a._wrapped;if(c._chain)c=c._wrapped;if(a.isEqual&&b.isFunction(a.isEqual))return a.isEqual(c);if(c.isEqual&&b.isFunction(c.isEqual))return c.isEqual(a);var e=l.call(a);if(e!=l.call(c))return false;switch(e){case "[object String]":return a==String(c);case "[object Number]":return a!=+a?c!=+c:a==0?1/a==1/c:a==+c;case "[object Date]":case "[object Boolean]":return+a==+c;case "[object RegExp]":return a.source==
c.source&&a.global==c.global&&a.multiline==c.multiline&&a.ignoreCase==c.ignoreCase}if(typeof a!="object"||typeof c!="object")return false;for(var f=d.length;f--;)if(d[f]==a)return true;d.push(a);var f=0,g=true;if(e=="[object Array]"){if(f=a.length,g=f==c.length)for(;f--;)if(!(g=f in a==f in c&&q(a[f],c[f],d)))break}else{if("constructor"in a!="constructor"in c||a.constructor!=c.constructor)return false;for(var h in a)if(b.has(a,h)&&(f++,!(g=b.has(c,h)&&q(a[h],c[h],d))))break;if(g){for(h in c)if(b.has(c,
h)&&!f--)break;g=!f}}d.pop();return g}var r=this,G=r._,n={},k=Array.prototype,o=Object.prototype,i=k.slice,H=k.unshift,l=o.toString,I=o.hasOwnProperty,w=k.forEach,x=k.map,y=k.reduce,z=k.reduceRight,A=k.filter,B=k.every,C=k.some,p=k.indexOf,D=k.lastIndexOf,o=Array.isArray,J=Object.keys,s=Function.prototype.bind,b=function(a){return new m(a)};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports)exports=module.exports=b;exports._=b}else r._=b;b.VERSION="1.3.1";var j=b.each=
b.forEach=function(a,c,d){if(a!=null)if(w&&a.forEach===w)a.forEach(c,d);else if(a.length===+a.length)for(var e=0,f=a.length;e<f;e++){if(e in a&&c.call(d,a[e],e,a)===n)break}else for(e in a)if(b.has(a,e)&&c.call(d,a[e],e,a)===n)break};b.map=b.collect=function(a,c,b){var e=[];if(a==null)return e;if(x&&a.map===x)return a.map(c,b);j(a,function(a,g,h){e[e.length]=c.call(b,a,g,h)});if(a.length===+a.length)e.length=a.length;return e};b.reduce=b.foldl=b.inject=function(a,c,d,e){var f=arguments.length>2;a==
null&&(a=[]);if(y&&a.reduce===y)return e&&(c=b.bind(c,e)),f?a.reduce(c,d):a.reduce(c);j(a,function(a,b,i){f?d=c.call(e,d,a,b,i):(d=a,f=true)});if(!f)throw new TypeError("Reduce of empty array with no initial value");return d};b.reduceRight=b.foldr=function(a,c,d,e){var f=arguments.length>2;a==null&&(a=[]);if(z&&a.reduceRight===z)return e&&(c=b.bind(c,e)),f?a.reduceRight(c,d):a.reduceRight(c);var g=b.toArray(a).reverse();e&&!f&&(c=b.bind(c,e));return f?b.reduce(g,c,d,e):b.reduce(g,c)};b.find=b.detect=
function(a,c,b){var e;E(a,function(a,g,h){if(c.call(b,a,g,h))return e=a,true});return e};b.filter=b.select=function(a,c,b){var e=[];if(a==null)return e;if(A&&a.filter===A)return a.filter(c,b);j(a,function(a,g,h){c.call(b,a,g,h)&&(e[e.length]=a)});return e};b.reject=function(a,c,b){var e=[];if(a==null)return e;j(a,function(a,g,h){c.call(b,a,g,h)||(e[e.length]=a)});return e};b.every=b.all=function(a,c,b){var e=true;if(a==null)return e;if(B&&a.every===B)return a.every(c,b);j(a,function(a,g,h){if(!(e=
e&&c.call(b,a,g,h)))return n});return e};var E=b.some=b.any=function(a,c,d){c||(c=b.identity);var e=false;if(a==null)return e;if(C&&a.some===C)return a.some(c,d);j(a,function(a,b,h){if(e||(e=c.call(d,a,b,h)))return n});return!!e};b.include=b.contains=function(a,c){var b=false;if(a==null)return b;return p&&a.indexOf===p?a.indexOf(c)!=-1:b=E(a,function(a){return a===c})};b.invoke=function(a,c){var d=i.call(arguments,2);return b.map(a,function(a){return(b.isFunction(c)?c||a:a[c]).apply(a,d)})};b.pluck=
function(a,c){return b.map(a,function(a){return a[c]})};b.max=function(a,c,d){if(!c&&b.isArray(a))return Math.max.apply(Math,a);if(!c&&b.isEmpty(a))return-Infinity;var e={computed:-Infinity};j(a,function(a,b,h){b=c?c.call(d,a,b,h):a;b>=e.computed&&(e={value:a,computed:b})});return e.value};b.min=function(a,c,d){if(!c&&b.isArray(a))return Math.min.apply(Math,a);if(!c&&b.isEmpty(a))return Infinity;var e={computed:Infinity};j(a,function(a,b,h){b=c?c.call(d,a,b,h):a;b<e.computed&&(e={value:a,computed:b})});
return e.value};b.shuffle=function(a){var b=[],d;j(a,function(a,f){f==0?b[0]=a:(d=Math.floor(Math.random()*(f+1)),b[f]=b[d],b[d]=a)});return b};b.sortBy=function(a,c,d){return b.pluck(b.map(a,function(a,b,g){return{value:a,criteria:c.call(d,a,b,g)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0}),"value")};b.groupBy=function(a,c){var d={},e=b.isFunction(c)?c:function(a){return a[c]};j(a,function(a,b){var c=e(a,b);(d[c]||(d[c]=[])).push(a)});return d};b.sortedIndex=function(a,
c,d){d||(d=b.identity);for(var e=0,f=a.length;e<f;){var g=e+f>>1;d(a[g])<d(c)?e=g+1:f=g}return e};b.toArray=function(a){return!a?[]:a.toArray?a.toArray():b.isArray(a)?i.call(a):b.isArguments(a)?i.call(a):b.values(a)};b.size=function(a){return b.toArray(a).length};b.first=b.head=function(a,b,d){return b!=null&&!d?i.call(a,0,b):a[0]};b.initial=function(a,b,d){return i.call(a,0,a.length-(b==null||d?1:b))};b.last=function(a,b,d){return b!=null&&!d?i.call(a,Math.max(a.length-b,0)):a[a.length-1]};b.rest=
b.tail=function(a,b,d){return i.call(a,b==null||d?1:b)};b.compact=function(a){return b.filter(a,function(a){return!!a})};b.flatten=function(a,c){return b.reduce(a,function(a,e){if(b.isArray(e))return a.concat(c?e:b.flatten(e));a[a.length]=e;return a},[])};b.without=function(a){return b.difference(a,i.call(arguments,1))};b.uniq=b.unique=function(a,c,d){var d=d?b.map(a,d):a,e=[];b.reduce(d,function(d,g,h){if(0==h||(c===true?b.last(d)!=g:!b.include(d,g)))d[d.length]=g,e[e.length]=a[h];return d},[]);
return e};b.union=function(){return b.uniq(b.flatten(arguments,true))};b.intersection=b.intersect=function(a){var c=i.call(arguments,1);return b.filter(b.uniq(a),function(a){return b.every(c,function(c){return b.indexOf(c,a)>=0})})};b.difference=function(a){var c=b.flatten(i.call(arguments,1));return b.filter(a,function(a){return!b.include(c,a)})};b.zip=function(){for(var a=i.call(arguments),c=b.max(b.pluck(a,"length")),d=Array(c),e=0;e<c;e++)d[e]=b.pluck(a,""+e);return d};b.indexOf=function(a,c,
d){if(a==null)return-1;var e;if(d)return d=b.sortedIndex(a,c),a[d]===c?d:-1;if(p&&a.indexOf===p)return a.indexOf(c);for(d=0,e=a.length;d<e;d++)if(d in a&&a[d]===c)return d;return-1};b.lastIndexOf=function(a,b){if(a==null)return-1;if(D&&a.lastIndexOf===D)return a.lastIndexOf(b);for(var d=a.length;d--;)if(d in a&&a[d]===b)return d;return-1};b.range=function(a,b,d){arguments.length<=1&&(b=a||0,a=0);for(var d=arguments[2]||1,e=Math.max(Math.ceil((b-a)/d),0),f=0,g=Array(e);f<e;)g[f++]=a,a+=d;return g};
var F=function(){};b.bind=function(a,c){var d,e;if(a.bind===s&&s)return s.apply(a,i.call(arguments,1));if(!b.isFunction(a))throw new TypeError;e=i.call(arguments,2);return d=function(){if(!(this instanceof d))return a.apply(c,e.concat(i.call(arguments)));F.prototype=a.prototype;var b=new F,g=a.apply(b,e.concat(i.call(arguments)));return Object(g)===g?g:b}};b.bindAll=function(a){var c=i.call(arguments,1);c.length==0&&(c=b.functions(a));j(c,function(c){a[c]=b.bind(a[c],a)});return a};b.memoize=function(a,
c){var d={};c||(c=b.identity);return function(){var e=c.apply(this,arguments);return b.has(d,e)?d[e]:d[e]=a.apply(this,arguments)}};b.delay=function(a,b){var d=i.call(arguments,2);return setTimeout(function(){return a.apply(a,d)},b)};b.defer=function(a){return b.delay.apply(b,[a,1].concat(i.call(arguments,1)))};b.throttle=function(a,c){var d,e,f,g,h,i=b.debounce(function(){h=g=false},c);return function(){d=this;e=arguments;var b;f||(f=setTimeout(function(){f=null;h&&a.apply(d,e);i()},c));g?h=true:
a.apply(d,e);i();g=true}};b.debounce=function(a,b){var d;return function(){var e=this,f=arguments;clearTimeout(d);d=setTimeout(function(){d=null;a.apply(e,f)},b)}};b.once=function(a){var b=false,d;return function(){if(b)return d;b=true;return d=a.apply(this,arguments)}};b.wrap=function(a,b){return function(){var d=[a].concat(i.call(arguments,0));return b.apply(this,d)}};b.compose=function(){var a=arguments;return function(){for(var b=arguments,d=a.length-1;d>=0;d--)b=[a[d].apply(this,b)];return b[0]}};
b.after=function(a,b){return a<=0?b():function(){if(--a<1)return b.apply(this,arguments)}};b.keys=J||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var c=[],d;for(d in a)b.has(a,d)&&(c[c.length]=d);return c};b.values=function(a){return b.map(a,b.identity)};b.functions=b.methods=function(a){var c=[],d;for(d in a)b.isFunction(a[d])&&c.push(d);return c.sort()};b.extend=function(a){j(i.call(arguments,1),function(b){for(var d in b)a[d]=b[d]});return a};b.defaults=function(a){j(i.call(arguments,
1),function(b){for(var d in b)a[d]==null&&(a[d]=b[d])});return a};b.clone=function(a){return!b.isObject(a)?a:b.isArray(a)?a.slice():b.extend({},a)};b.tap=function(a,b){b(a);return a};b.isEqual=function(a,b){return q(a,b,[])};b.isEmpty=function(a){if(b.isArray(a)||b.isString(a))return a.length===0;for(var c in a)if(b.has(a,c))return false;return true};b.isElement=function(a){return!!(a&&a.nodeType==1)};b.isArray=o||function(a){return l.call(a)=="[object Array]"};b.isObject=function(a){return a===Object(a)};
b.isArguments=function(a){return l.call(a)=="[object Arguments]"};if(!b.isArguments(arguments))b.isArguments=function(a){return!(!a||!b.has(a,"callee"))};b.isFunction=function(a){return l.call(a)=="[object Function]"};b.isString=function(a){return l.call(a)=="[object String]"};b.isNumber=function(a){return l.call(a)=="[object Number]"};b.isNaN=function(a){return a!==a};b.isBoolean=function(a){return a===true||a===false||l.call(a)=="[object Boolean]"};b.isDate=function(a){return l.call(a)=="[object Date]"};
b.isRegExp=function(a){return l.call(a)=="[object RegExp]"};b.isNull=function(a){return a===null};b.isUndefined=function(a){return a===void 0};b.has=function(a,b){return I.call(a,b)};b.noConflict=function(){r._=G;return this};b.identity=function(a){return a};b.times=function(a,b,d){for(var e=0;e<a;e++)b.call(d,e)};b.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};b.mixin=function(a){j(b.functions(a),
function(c){K(c,b[c]=a[c])})};var L=0;b.uniqueId=function(a){var b=L++;return a?a+b:b};b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var t=/.^/,u=function(a){return a.replace(/\\\\/g,"\\").replace(/\\'/g,"'")};b.template=function(a,c){var d=b.templateSettings,d="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(d.escape||t,function(a,b){return"',_.escape("+
u(b)+"),'"}).replace(d.interpolate||t,function(a,b){return"',"+u(b)+",'"}).replace(d.evaluate||t,function(a,b){return"');"+u(b).replace(/[\r\n\t]/g," ")+";__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",e=new Function("obj","_",d);return c?e(c,b):function(a){return e.call(this,a,b)}};b.chain=function(a){return b(a).chain()};var m=function(a){this._wrapped=a};b.prototype=m.prototype;var v=function(a,c){return c?b(a).chain():a},K=function(a,c){m.prototype[a]=
function(){var a=i.call(arguments);H.call(a,this._wrapped);return v(c.apply(b,a),this._chain)}};b.mixin(b);j("pop,push,reverse,shift,sort,splice,unshift".split(","),function(a){var b=k[a];m.prototype[a]=function(){var d=this._wrapped;b.apply(d,arguments);var e=d.length;(a=="shift"||a=="splice")&&e===0&&delete d[0];return v(d,this._chain)}});j(["concat","join","slice"],function(a){var b=k[a];m.prototype[a]=function(){return v(b.apply(this._wrapped,arguments),this._chain)}});m.prototype.chain=function(){this._chain=
true;return this};m.prototype.value=function(){return this._wrapped}}).call(this);

// https://github.com/github/github-flavored-markdown/blob/gh-pages/scripts/showdown.js
// Copyright (c) 2007 John Fraser.
// Original Markdown Copyright (c) 2004-2005 John Gruber
// Redistributable under a BSD-style open source license.
Showdown={};Showdown.converter=function(){var a,b,c,d=0;this.makeHtml=function(d){return a=new Array,b=new Array,c=new Array,d=d.replace(/~/g,"~T"),d=d.replace(/\$/g,"~D"),d=d.replace(/\r\n/g,"\n"),d=d.replace(/\r/g,"\n"),d="\n\n"+d+"\n\n",d=F(d),d=d.replace(/^[ \t]+$/mg,""),d=g(d),d=f(d),d=i(d),d=D(d),d=d.replace(/~D/g,"$$"),d=d.replace(/~T/g,"~"),d=d.replace(/https?\:\/\/[^"\s\<\>]*[^.,;'">\:\s\<\>\)\]\!]/g,function(a,b){var c=d.slice(0,b),e=d.slice(b);return c.match(/<[^>]+$/)&&e.match(/^[^>]*>/)?a:(href=a.replace(/^http:\/\/github.com\//,"https://github.com/"),"<a href='"+href+"'>"+a+"</a>")}),d=d.replace(/[a-z0-9_\-+=.]+@[a-z0-9\-]+(\.[a-z0-9-]+)+/ig,function(a){return"<a href='mailto:"+a+"'>"+a+"</a>"}),d=d.replace(/[a-f0-9]{40}/ig,function(a,b){if(typeof GitHub=="undefined"||typeof GitHub.nameWithOwner=="undefined")return a;var c=d.slice(0,b),e=d.slice(b);return c.match(/@$/)||c.match(/<[^>]+$/)&&e.match(/^[^>]*>/)?a:"<a href='http://github.com/"+GitHub.nameWithOwner+"/commit/"+a+"'>"+a.substring(0,7)+"</a>"}),d=d.replace(/([a-z0-9_\-+=.]+)@([a-f0-9]{40})/ig,function(a,b,c,f){if(typeof GitHub=="undefined"||typeof GitHub.nameWithOwner=="undefined")return a;GitHub.repoName=GitHub.repoName||e();var g=d.slice(0,f),h=d.slice(f);return g.match(/\/$/)||g.match(/<[^>]+$/)&&h.match(/^[^>]*>/)?a:"<a href='http://github.com/"+b+"/"+GitHub.repoName+"/commit/"+c+"'>"+b+"@"+c.substring(0,7)+"</a>"}),d=d.replace(/([a-z0-9_\-+=.]+\/[a-z0-9_\-+=.]+)@([a-f0-9]{40})/ig,function(a,b,c){return"<a href='http://github.com/"+b+"/commit/"+c+"'>"+b+"@"+c.substring(0,7)+"</a>"}),d=d.replace(/#([0-9]+)/ig,function(a,b,c){if(typeof GitHub=="undefined"||typeof GitHub.nameWithOwner=="undefined")return a;var e=d.slice(0,c),f=d.slice(c);return e==""||e.match(/[a-z0-9_\-+=.]$/)||e.match(/<[^>]+$/)&&f.match(/^[^>]*>/)?a:"<a href='http://github.com/"+GitHub.nameWithOwner+"/issues/#issue/"+b+"'>"+a+"</a>"}),d=d.replace(/([a-z0-9_\-+=.]+)#([0-9]+)/ig,function(a,b,c,f){if(typeof GitHub=="undefined"||typeof GitHub.nameWithOwner=="undefined")return a;GitHub.repoName=GitHub.repoName||e();var g=d.slice(0,f),h=d.slice(f);return g.match(/\/$/)||g.match(/<[^>]+$/)&&h.match(/^[^>]*>/)?a:"<a href='http://github.com/"+b+"/"+GitHub.repoName+"/issues/#issue/"+c+"'>"+a+"</a>"}),d=d.replace(/([a-z0-9_\-+=.]+\/[a-z0-9_\-+=.]+)#([0-9]+)/ig,function(a,b,c){return"<a href='http://github.com/"+b+"/issues/#issue/"+c+"'>"+a+"</a>"}),d};var e=function(){return GitHub.nameWithOwner.match(/^.+\/(.+)$/)[1]},f=function(c){var c=c.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|\Z)/gm,function(c,d,e,f,g){return d=d.toLowerCase(),a[d]=z(e),f?f+g:(g&&(b[d]=g.replace(/"/g,"&quot;")),"")});return c},g=function(a){a=a.replace(/\n/g,"\n\n");var b="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del",c="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math";return a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,h),a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,h),a=a.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,h),a=a.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,h),a=a.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,h),a=a.replace(/\n\n/g,"\n"),a},h=function(a,b){var d=b;return d=d.replace(/\n\n/g,"\n"),d=d.replace(/^\n/,""),d=d.replace(/\n+$/g,""),d="\n\n~K"+(c.push(d)-1)+"K\n\n",d},i=function(a){a=p(a);var b=t("<hr />");return a=a.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,b),a=a.replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,b),a=a.replace(/^[ ]{0,2}([ ]?\_[ ]?){3,}[ \t]*$/gm,b),a=r(a),a=s(a),a=x(a),a=g(a),a=y(a),a},j=function(a){return a=u(a),a=k(a),a=A(a),a=n(a),a=l(a),a=B(a),a=z(a),a=w(a),a=a.replace(/  +\n/g," <br />\n"),a},k=function(a){var b=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi;return a=a.replace(b,function(a){var b=a.replace(/(.)<\/?code>(?=.)/g,"$1`");return b=G(b,"\\`*_"),b}),a},l=function(a){return a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,m),a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?(.*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,m),a=a.replace(/(\[([^\[\]]+)\])()()()()()/g,m),a},m=function(c,d,e,f,g,h,i,j){j==undefined&&(j="");var k=d,l=e,m=f.toLowerCase(),n=g,o=j;if(n==""){m==""&&(m=l.toLowerCase().replace(/ ?\n/g," ")),n="#"+m;if(a[m]!=undefined)n=a[m],b[m]!=undefined&&(o=b[m]);else{if(!(k.search(/\(\s*\)$/m)>-1))return k;n=""}}n=G(n,"*_");var p='<a href="'+n+'"';return o!=""&&(o=o.replace(/"/g,"&quot;"),o=G(o,"*_"),p+=' title="'+o+'"'),p+=">"+l+"</a>",p},n=function(a){return a=a.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,o),a=a.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,o),a},o=function(c,d,e,f,g,h,i,j){var k=d,l=e,m=f.toLowerCase(),n=g,o=j;o||(o="");if(n==""){m==""&&(m=l.toLowerCase().replace(/ ?\n/g," ")),n="#"+m;if(a[m]==undefined)return k;n=a[m],b[m]!=undefined&&(o=b[m])}l=l.replace(/"/g,"&quot;"),n=G(n,"*_");var p='<img src="'+n+'" alt="'+l+'"';return o=o.replace(/"/g,"&quot;"),o=G(o,"*_"),p+=' title="'+o+'"',p+=" />",p},p=function(a){return a=a.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(a,b){return t("<h1>"+j(b)+"</h1>")}),a=a.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(a,b){return t("<h2>"+j(b)+"</h2>")}),a=a.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(a,b,c){var d=b.length;return t("<h"+d+">"+j(c)+"</h"+d+">")}),a},q,r=function(a){a+="~0";var b=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return d?a=a.replace(b,function(a,b,c){var d=b,e=c.search(/[*+-]/g)>-1?"ul":"ol";d=d.replace(/\n{2,}/g,"\n\n\n");var f=q(d);return f=f.replace(/\s+$/,""),f="<"+e+">"+f+"</"+e+">\n",f}):(b=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,a=a.replace(b,function(a,b,c,d){var e=b,f=c,g=d.search(/[*+-]/g)>-1?"ul":"ol",f=f.replace(/\n{2,}/g,"\n\n\n"),h=q(f);return h=e+"<"+g+">\n"+h+"</"+g+">\n",h})),a=a.replace(/~0/,""),a};q=function(a){return d++,a=a.replace(/\n{2,}$/,"\n"),a+="~0",a=a.replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,function(a,b,c,d,e){var f=e,g=b,h=c;return g||f.search(/\n{2,}/)>-1?f=i(E(f)):(f=r(E(f)),f=f.replace(/\n$/,""),f=j(f)),"<li>"+f+"</li>\n"}),a=a.replace(/~0/g,""),d--,a};var s=function(a){return a+="~0",a=a.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(a,b,c){var d=b,e=c;return d=v(E(d)),d=F(d),d=d.replace(/^\n+/g,""),d=d.replace(/\n+$/g,""),d="<pre><code>"+d+"\n</code></pre>",t(d)+e}),a=a.replace(/~0/,""),a},t=function(a){return a=a.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(c.push(a)-1)+"K\n\n"},u=function(a){return a=a.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(a,b,c,d,e){var f=d;return f=f.replace(/^([ \t]*)/g,""),f=f.replace(/[ \t]*$/g,""),f=v(f),b+"<code>"+f+"</code>"}),a},v=function(a){return a=a.replace(/&/g,"&amp;"),a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;"),a=G(a,"*_{}[]\\",!1),a},w=function(a){return a=a.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>"),a=a.replace(/(\w)_(\w)/g,"$1~E95E$2"),a=a.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>"),a},x=function(a){return a=a.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(a,b){var c=b;return c=c.replace(/^[ \t]*>[ \t]?/gm,"~0"),c=c.replace(/~0/g,""),c=c.replace(/^[ \t]+$/gm,""),c=i(c),c=c.replace(/(^|\n)/g,"$1  "),c=c.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(a,b){var c=b;return c=c.replace(/^  /mg,"~0"),c=c.replace(/~0/g,""),c}),t("<blockquote>\n"+c+"\n</blockquote>")}),a},y=function(a){a=a.replace(/^\n+/g,""),a=a.replace(/\n+$/g,"");var b=a.split(/\n{2,}/g),d=new Array,e=b.length;for(var f=0;f<e;f++){var g=b[f];g.search(/~K(\d+)K/g)>=0?d.push(g):g.search(/\S/)>=0&&(g=j(g),g=g.replace(/\n/g,"<br />"),g=g.replace(/^([ \t]*)/g,"<p>"),g+="</p>",d.push(g))}e=d.length;for(var f=0;f<e;f++)while(d[f].search(/~K(\d+)K/)>=0){var h=c[RegExp.$1];h=h.replace(/\$/g,"$$$$"),d[f]=d[f].replace(/~K\d+K/,h)}return d.join("\n\n")},z=function(a){return a=a.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),a=a.replace(/<(?![a-z\/?\$!])/gi,"&lt;"),a},A=function(a){return a=a.replace(/\\(\\)/g,H),a=a.replace(/\\([`*_{}\[\]()>#+-.!])/g,H),a},B=function(a){return a=a.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>'),a=a.replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(a,b){return C(D(b))}),a},C=function(a){function b(a){var b="0123456789ABCDEF",c=a.charCodeAt(0);return b.charAt(c>>4)+b.charAt(c&15)}var c=[function(a){return"&#"+a.charCodeAt(0)+";"},function(a){return"&#x"+b(a)+";"},function(a){return a}];return a="mailto:"+a,a=a.replace(/./g,function(a){if(a=="@")a=c[Math.floor(Math.random()*2)](a);else if(a!=":"){var b=Math.random();a=b>.9?c[2](a):b>.45?c[1](a):c[0](a)}return a}),a='<a href="'+a+'">'+a+"</a>",a=a.replace(/">.+:/g,'">'),a},D=function(a){return a=a.replace(/~E(\d+)E/g,function(a,b){var c=parseInt(b);return String.fromCharCode(c)}),a},E=function(a){return a=a.replace(/^(\t|[ ]{1,4})/gm,"~0"),a=a.replace(/~0/g,""),a},F=function(a){return a=a.replace(/\t(?=\t)/g,"    "),a=a.replace(/\t/g,"~A~B"),a=a.replace(/~B(.+?)~A/g,function(a,b,c){var d=b,e=4-d.length%4;for(var f=0;f<e;f++)d+=" ";return d}),a=a.replace(/~A/g,"    "),a=a.replace(/~B/g,""),a},G=function(a,b,c){var d="(["+b.replace(/([\[\]\\])/g,"\\$1")+"])";c&&(d="\\\\"+d);var e=new RegExp(d,"g");return a=a.replace(e,H),a},H=function(a,b){var c=b.charCodeAt(0);return"~E"+c+"E"}};

bundler = {};
(function(exports) {
    var modules = { 
    };
    function module(path, content) {
        content += '//@ sourceURL=' + path;
        modules[path.replace(/.*\//,'').replace(/\.js$/,'')] = content;
    }
    function require(name) {
        name = name.replace(/.*\//,'').replace(/\.js$/,'');
        if(typeof modules[name] === 'string') {
            var exports = {};
            var module = {exports: exports};
            Function('require', 'exports', 'module', modules[name]).call({}, require, exports, module);
            modules[name] = module.exports;
        } 
        return modules[name];
    }
    exports.module = module;
    exports.require = require;
    module('underscore', 'module.exports=_');
    module('zquery', 'module.exports=$');
    module('window', 'module.exports=window');
    module('document', 'module.exports=document');
    module('modernizr', 'module.exports=Modernizr');
    module('showdown', 'module.exports=Showdown');
    module('console', 'module.exports=window.console || {log: function() {}}');
})(bundler);
require = bundler.require;
/*global: window: true */
if(typeof window.console === 'undefined') {
    window.console = require('console');
}

bundler.module('scripts/util.js','exports.stringEscape=function(str){return str.replace(/[^" !#-&(-\x5c[\x5c]-~]/g,function(c){var code=c.charCodeAt(0);return code<256?"\x5c\x5cx"+(256+code).toString(16).slice(1):"\x5c\x5cu"+(65536+code).toString(16).slice(1)})},exports.delaySingleExecAsync=function(fn,delay){delay=delay||10;var scheduled=!1,running=!1,doneFns=[],scheduleFn;function exec(){scheduled=!1;var fns=doneFns;doneFns=[];if(running)return scheduleFn();running=!0,fn(function(){running=!1,fns.forEach(function(fn){fn()})})}return scheduleFn=function(done){typeof done=="function"&&doneFns.push(done);if(scheduled)return;scheduled=!0,setTimeout(exec,delay)},scheduleFn};var flattenArrays=exports.flattenArrays=function(list){return Array.isArray(list)?list.map(flattenArrays).reduce(function(a,b){return a.concat(b)}):[list]};exports.uniq=function(lists){var hash={};return flattenArrays(lists).forEach(function(elem){hash[elem]=!0}),Object.keys(hash)},exports.niceSingle=function(fn){var running=!1;return function(){if(running)return;running=!0,setTimeout(function(){fn(),running=!1},10)}};var seed=1,pseudoRandom=exports.pseudoRandom=function(n){return seed=1664525*(n||seed)+1013904223&2147483647};exports.hash=function(text){var result=0;for(var i=0;i<text.length;++i)result=pseudoRandom(result+text.charCodeAt(i));return result},exports.colorHash=function(text){return"#"+((exports.hash(text)|14737632)&16777215).toString(16)}');
bundler.module('scripts/jsxml.js','var global=this;function jsonmlError(desc){throw desc}function plainObject(obj){return typeof obj=="object"&&obj!==null&&!Array.isArray(obj)}var entities={quot:\x27"\x27,amp:"&",apos:"\x27",lt:"<",gt:">"},reventities=function(){var result={},key;for(key in entities)entities.hasOwnProperty(key)&&(result[entities[key]]=key);return result}();function fromXml(xml){typeof xml!="string"&&jsonmlError("Error: jsonml.parseXML didn\x27t receive a string as parameter");var whitespace=" \x5cn\x5cr\x09",c=xml[0],pos=0,stack=[],tag=[];function next_char(){++pos,pos<xml.length?c=xml[pos]:c=undefined}function is_a(str){return str.indexOf(c)!==-1}function read_until(symb){var buffer=[];while(c&&!is_a(symb)){if(c==="&"){next_char();var entity=read_until(";");entity[0]==="#"?entity[1]==="x"?c=String.fromCharCode(parseInt(entity.slice(2),16)):c=String.fromCharCode(parseInt(entity.slice(1),10)):(c=entities[entity],c||jsonmlError("error: unrecognisable xml entity: "+entity))}buffer.push(c),next_char()}return buffer.join("")}while(is_a(whitespace))next_char();while(c)if(is_a("<")){next_char();if(is_a("?!")){if(xml.slice(pos,pos+3)==="!--"){pos+=3;while(xml.slice(pos,pos+2)!=="--")++pos}read_until(">"),next_char()}else if(!is_a("/")){var newtag=[read_until(whitespace+">/")],attributes={},has_attributes=0;while(c&&is_a(whitespace))next_char();while(c&&!is_a(">/")){has_attributes=1;var attr=read_until(whitespace+"=>");if(c==="="){next_char();var value_terminator=whitespace+">/";is_a("\x5c"\x27")&&(value_terminator=c,next_char()),attributes[attr]=read_until(value_terminator),is_a("\x5c"\x27")&&next_char()}else jsonmlError("something not attribute in tag");while(c&&is_a(whitespace))next_char()}has_attributes&&newtag.push(attributes),is_a("/")?(next_char(),is_a(">")||jsonmlError(\x27expected ">" after "/" within tag\x27),tag.push(newtag)):(stack.push(tag),tag=newtag),next_char()}else{next_char(),read_until(">")!==tag[0]&&jsonmlError("end tag not matching: "+tag[0]),next_char();var parent_tag=stack.pop();tag.length<=2&&!Array.isArray(tag[1])&&typeof tag[1]!="string"&&tag.push(""),parent_tag.push(tag),tag=parent_tag}}else tag.push(read_until("<"));return tag}exports.fromXml=function(xml){var parsed=fromXml(xml);for(var i=0;i<parsed.length;++i)if(Array.isArray(parsed[i]))return parsed[i]};function xmlEscape(str,acc){for(var i=0;i<str.length;++i){var c=str[i],code=c.charCodeAt(0),s=reventities[c];s?acc.push("&"+s+";"):code>=128?acc.push("&#"+code+";"):acc.push(c)}}function toXmlAcc(jsonml,acc){if(Array.isArray(jsonml)){acc.push("<"),acc.push(jsonml[0]);var pos=1,attributes=jsonml[1],key;if(attributes&&!Array.isArray(attributes)&&typeof attributes!="string"){for(key in attributes)attributes.hasOwnProperty(key)&&(acc.push(" "),acc.push(key),acc.push(\x27="\x27),xmlEscape(attributes[key],acc),acc.push(\x27"\x27));++pos}if(pos<jsonml.length){acc.push(">");do toXmlAcc(jsonml[pos],acc),++pos;while(pos<jsonml.length);acc.push("</"),acc.push(jsonml[0]),acc.push(">")}else acc.push(" />")}else xmlEscape(String(jsonml),acc)}exports.toXml=function(jsonml){var acc=[];return toXmlAcc(jsonml,acc),acc.join("")};var childReduce=exports.childReduce=function(jsonml,fn,acc){var first=jsonml[1];if(typeof first!="object"||Array.isArray(first))acc=fn(acc,first);for(var pos=2;pos<jsonml.length;++pos)acc=fn(acc,jsonml[pos]);return acc};exports.getAttr=function(jsonml,attribute){return Array.isArray(jsonml[1])?undefined:jsonml[1][attribute]};function addprop(obj,key,val){obj[key]?Array.isArray(obj[key])?obj[key].push(val):obj[key]=[obj[key],val]:obj[key]=val}function toObjectInner(jsonml){var result={},attr=jsonml[1],pos,key;if(typeof attr=="object"&&!Array.isArray(attr)){for(key in attr)attr.hasOwnProperty(key)&&(result["@"+key]=attr[key]);pos=2}else{pos=1;if(jsonml.length===2&&!Array.isArray(attr))return attr}while(pos<jsonml.length){var current=jsonml[pos];Array.isArray(current)?addprop(result,current[0],toObjectInner(current)):addprop(result,"_",current),++pos}return result}exports.toObject=function(jsonml){var result={};return result[jsonml[0]]=toObjectInner(jsonml),result};function visit(jsonml,fn){jsonml.forEach(function(elem){Array.isArray(elem)&&visit(elem,fn)}),fn(jsonml)}function insertEmptyAttributes(jsonml){plainObject(jsonml[1])||(jsonml.unshift(jsonml[0]),jsonml[1]={})}exports.withAttr=function(obj){return visit(obj,insertEmptyAttributes),obj},exports.toDOM=function toDOM(jsonml){var elem;if(Array.isArray(jsonml)){insertEmptyAttributes(jsonml),elem=document.createElement(jsonml[0]);var attr=jsonml[1];for(var i=2;i<jsonml.length;++i)elem.appendChild(toDOM(jsonml[i]));for(var name in attr)if(attr[name]!==undefined&&attr[name]!==null){try{elem[{"class":"className","for":"htmlFor"}[name]||name]=attr[name]}catch(e){}elem.setAttribute(name,attr[name]);if(global.$&&name.slice(0,2)==="on"){var fn=typeof attr[name]=="string"?new Function(attr[name]):attr[name];global.$(elem).bind(name.slice(2),fn)}}}else typeof jsonml=="string"&&(elem=document.createTextNode(jsonml));return elem}');
bundler.module('scripts/main.js','var $=require("zquery"),fullbrows=require("fullbrows"),notes={type:"scrollable",start:function(){var showdown;showdown=require("showdown"),showdown=new showdown.converter;var app=this;$.get("notes/"+this.param+".md",function(text){var html=showdown.makeHtml(text);app.$.html(html)})}},notessource={type:"scrollable",start:function(){var showdown;showdown=require("showdown"),showdown=new showdown.converter;var app=this;$.get("notes/"+this.param+".md",function(text){app.$.html($("<pre>").text(text))})}};$("head").append(\x27<style>@font-face { font-family: Ubuntu; src: url("img/Ubuntu-R.ttf"); }@font-face { font-family: sans-serif; src: url("img/Ubuntu-R.ttf"); }@font-face { font-family: "Ubuntu Mono"; src: url("img/UbuntuMono-R.ttf"); }@font-face { font-family: "Ubuntu Condensed"; src: url("img/Ubuntu-C.ttf"); }tt { font-family: "Ubuntu Mono", monospace; }code { font-family: "Ubuntu Mono", monospace; }pre { font-family: "Ubuntu Mono", monospace; }body { background: "black"; font-family: Ubuntu, sans-serif; }</style>\x27);var menuXml=["ul",["li","solsort",["ul",["li",["a",{href:"#rasmuserik"},"Rasmus Erik"]],["li","Apps",["ul",["li",["a",{href:"#dkcities"},"Danske Byer geografi tr\xe6ner"]],["li",["a",{href:"#notescore"},"Note\xadScore music reading exercise"]],["li",["a",{href:"http://solsort.dk/planetcute"},"Planet\xadCute game engine prototype"]],["li",["a",{href:"/yolan/#blobshot"},"Blob\xadShot game written in Yolan"]],["li",["a",{href:"#combigame"},"Combi\xadGame set-like puzzle"]]]],["li","Notes",["ul",["li",["a",{href:"#notes/tekststruktur-for-rapporter"},"Tekst\xadstruktur for rapporter"]],["li",["a",{href:"#notes/tommelfingerregler-for-skrivning"},"Tommel\xadfinger\xadregler for skrivning"]],["li",["a",{href:"#notes/fototips"},"Foto\xadtips"]],["li",["a",{href:"#notes/speak-eval"},"Speech Evaluation Notes"]]]],["li","Code Demos",["ul",["li",["a",{href:"#plasma"},"Diamond-square plasma generation"]],["li",["a",{href:"#sierp"},"Tweetsize Sierpinsky tri\xadangle"]],["li",["a",{href:"#listboxer"},"Prettydrawing of list data structure"]],["li",["a",{href:"#graph"},"Force based graph drawing"]],["li",["a",{href:"#brown"},"Tweetsize brownian noise animation"]],["li",["a",{href:"#rain"},"Rain\xaddrops on water simulation"]],["li",["a",{href:"#julia4d"},"Projection of 4d-julia\xadbrot fractal"]]]],["li","Presentations",["ul",["li",["a",{href:"http://solsort.dk/osd2012"},"Serious JavaScript - presentation at Opensource days"]]]]]]],currentName="";function dispatch(){$("#content").html("... working ...");var param=window.location.hash.slice(1);for(var name in apps)if(param.slice(0,name.length)===name){param=param.slice(name.length);break}console.log("name:",name,"param:",param),console.log(apps[name]),apps[name].param=param,fullbrows.start(apps[name])}exports.main=function(){$(function(){window.onhashchange=dispatch,dispatch()})},exports.switchTo=function(name,param){name||(name=currentName),window.location.hash=name+param};function unicodeTest(){var t=[],i,n=65538;$("body").text("");for(i=0;i<n;++i)t.push(i);t=t.map(function(a){return String.fromCharCode(a)}),t=t.join("");for(i=0;i<n;++i)t.charCodeAt(i)!==i&&$("body").append("error t["+i+"] -> "+t.charCodeAt(i)+"<br>");$("body").append("done")}var apps={combigame:require("combigame").app,bidiv:require("bidiv").app,notescore:require("notescore").app,dkcities:require("dkcities").app,plasma:require("plasma").app,test:{update:function(){$("#content").html(\x27<div style="text-align: center; letter-spacing: -10pt; line-height: 60%; font-family: \x5c\x27Ubuntu Condensed\x5c\x27;font-size:230pt"><br/>code<div style="font-size: 170pt">source\x27)}},"source/notes/":notessource,"source/":require("showSource").app,timelog:require("timelog").app,sierp:require("sierp").app,listboxer:require("listboxer").app,graph:require("graph").app,rasmuserik:require("rasmuserik").app,brown:require("brown").app,rain:require("rain").app,julia4d:require("julia4d").app,"notes/":notes,"default":require("./menu").createApp(menuXml)}');
bundler.module('scripts/showSource.js','var $=require("zquery"),_=require("underscore"),console=require("console"),doccoLineRegEx=/^\x5cs*\x5c/\x5c/( |$)/;function isDoccoComment(line){return line.match(doccoLineRegEx)}function docco(text){var i,showdown=require("showdown");showdown=new showdown.converter,text=text.split("\x5cn");var result=[],current=[],prevIsDocco=!0,lineno=0;text.forEach(function(line){var currentIsDocco=!!isDoccoComment(line);currentIsDocco?line=line.replace(doccoLineRegEx,""):line={lineno:lineno,line:line},prevIsDocco===currentIsDocco?current.push(line):(result.push(current),current=[line]),prevIsDocco=currentIsDocco,++lineno}),result.push(current),result.length&1&&result.push([]);var docs=[],code=[];for(i=0;i<result.length;i+=2)docs.push(result[i]),result[i+1][result[i+1].length-1].line.trim().length===0&&(console.log("xxx"),console.log(result[i+1].length),result[i+1].pop(),console.log(result[i+1].length)),code.push(result[i+1]);docs=docs.map(function(doc){return\x27<div class="docblock">\x27+showdown.makeHtml(doc.join("\x5cn"))+"</div>"}),code=code.map(function(code){return\x27<div class="codeblock">\x27+code.map(function(code){return\x27<div><span class="lineno">\x27+(1+code.lineno)+" </span> "+_.escape(code.line)+"</div>"}).join("")+"</div>"}),result=[];for(i=0;i<docs.length;++i)result.push(docs[i]),result.push(code[i]);return result.join("")}function style(app){var w=app.$.width();$(".lineno").css({fontSize:"50%",width:"4ex",color:"#ccc","vertical-align":"0.5ex",display:"inline-block",textAlign:"right"}),$(".codeblock div").css({whiteSpace:"pre-wrap",textIndent:".5ex",fontFamily:"Ubuntu Mono"}),$(".docblock p").css({margin:0,padding:0}),$(".docblock").css({fontSize:"10pt",margin:0,padding:0,marginTop:app.mobile?".1pt":"2pt",borderTop:app.mobile?"none":"1px solid #eee","vertical-align":"top",display:"inline-block",marginLeft:w*.02|0,width:(app.mobile?w*.95:w*.45)|0}),$(".codeblock").css({marginTop:app.mobile?".1pt":"2pt",borderTop:app.mobile?"none":"1px solid #eee","vertical-align":"top",display:"inline-block",fontSize:Math.max(app.$.width()/45*(app.mobile?1:.5),8),width:app.mobile?w:w>>1})}exports.app={type:"scrollable",start:function(){var app=this;$.ajax({url:"/scripts/"+this.param+".js",dataType:"text",success:function(text){app.$.html(docco(text)),style(app)}})},update:function(){style(this)}}');
bundler.module('scripts/menu.js','var util=require("util"),fullbrows=require("fullbrows"),Modernizr=require("modernizr"),$=require("zquery"),window=require("window"),boxWidth=1.5,position,positionArray,margin=2,padding=2,titlesize=20,border=Modernizr.boxshadow?0:1;function elemToObj(elem){console.log(elem);var result={};result.title=$(elem.firstChild).text().trim(),result.children=[];if(elem.children[0]){var elems=elem.children[0].children;for(var i=0;i<elems.length;++i)result.children.push(elemToObj(elems[i]))}return result.url=elem.children[0]&&elem.children[0].href,result.elem=elem,result}function totalSize(arr){return arr.reduce(function(a,b){return a+b.size},0)}function initMenu(menu){var style=menu.elem.style;style.fontSize="16px",style.display="block",style.position="absolute",style.padding=padding+"px",style.top="100px",style.left="100px",style.margin=margin+"px",style.textAlign="center",style.borderRadius=margin*2+"px",style.border=border+"px solid #000000",style.overflow="hidden",style.backgroundColor=util.colorHash(menu.title),style.boxShadow="3px 3px 9px rgba(0, 0, 0, .8)",style.webkitBoxShadow="3px 3px 9px rgba(0, 0, 0, .8)";if(menu.url){var url=menu.url;$(menu.elem).bind(Modernizr.touch?"touchstart":"mousedown",function(){window.location=url})}menu.children.forEach(initMenu),menu.size=totalSize(menu.children)/1.5+1}exports.createApp=function(jsonml){var menu;return{hideButtons:!0,underbar:!0,start:function(){$("body").css("background","black"),$("#content").html(require("jsxml").toXml(jsonml)),menu=elemToObj($("#content > ul > li")[0]),initMenu(menu),this.update(this.elem)},update:function(){var elem=this.elem;console.log(elem),position(menu,-margin,-margin,$(elem).width()+margin,$(elem).height()+margin)}}},position=function(menu,x,y,w,h){w-=2*(margin+border+padding),h-=2*(margin+border+padding);var $elem=$(menu.elem);$elem.css("left",x).css("top",y).css("width",w);var fontsize=16;$elem.css("fontSize",fontsize);if(menu.children.length===0){$elem.css("height","auto");while(fontsize&&$elem.height()>h)--fontsize,$elem.css("fontSize",fontsize)}$elem.css("height",h),$elem.css("boxShadow","3px 3px 9px rgba(0, 0, 0, .8)"),positionArray(menu.children,padding*2,titlesize+padding,w-padding*2,h-titlesize-padding*2)},positionArray=function(arr,x,y,w,h){if(arr.length===0)return;if(arr.length===1)return position(arr[0],x,y,w,h);var weight=totalSize(arr),splitsum=weight,sum=0,pos=0,ratio;for(var i=0;i<arr.length;++i)sum+=arr[i].size,Math.abs(sum-weight/2)<splitsum&&(pos=i+1,splitsum=Math.abs(sum-weight/2),ratio=sum/weight);var arr1=arr.slice(0,pos),arr2=arr.slice(pos);w>boxWidth*h?(positionArray(arr1,x,y,w*ratio|0,h),positionArray(arr2,x+w*ratio|0,y,w-(w*ratio|0),h)):(positionArray(arr1,x,y,w,h*ratio|0),positionArray(arr2,x,y+h*ratio|0,w,h-(h*ratio|0)))},exports.doMenu=function(elem){}');
bundler.module('scripts/combigame.js','var $=require("zquery"),_=require("underscore"),webutil=require("webutil"),fullbrows=require("fullbrows"),Modernizr=require("modernizr");exports.app={start:startGame,update:doLayout};var difficulty,prevtime,giveup,selected={},cards=[],hidden={opacity:0,width:0,height:0},transitionStyle={transition:"opacity 1s","-moz-transition":"opacity 1s","-webkit-transition":"opacity 1s","-o-transition":"opacity 1s"},visibleStyle,selectedStyle,unselectedStyle,cardPositions,doLayout=function(){var $content=$("#content");$content.css("background","white");var w=$content.width(),h=$content.height(),topPad,leftPad,landscape=!0,i,x,y,size;cardPositions=[],size=Math.min(Math.max(w,h)/4,Math.min(w,h)/3),w>h?(topPad=h-size*3>>1,leftPad=w-size*4>>1):(topPad=h-size*4>>1,leftPad=w-size*3>>1,landscape=!1),topPad+=0,leftPad+=0;for(i=0;i<12;++i)landscape?cardPositions.push({top:topPad+(.5+i%3)*size,left:leftPad+(.5+(i/3|0))*size}):cardPositions.push({left:leftPad+(.5+i%3)*size,top:topPad+(.5+(i/3|0))*size});visibleStyle={opacity:1,"margin-top":-size/2,"margin-left":-size/2,background:"none",width:.9*size,height:.9*size},selectedStyle={"border-style":"solid","border-width":1,"margin-top":-size/2-1,"margin-left":-size/2-1,"border-radius":size/16,"border-color":"gray"},unselectedStyle={"margin-top":-size/2,"margin-left":-size/2,border:"none"},$(".card").css({top:h,left:w});for(i=0;i<12;++i)anim(i,$("#card"+cards[i]))()};function anim(i,$card){return function(){$card.css(cardPositions[i]),setTimeout(function(){$card.css(transitionStyle).css(visibleStyle)},0)}}var click=function(){var lastClickTime=0,prevCard="";return function(card){if(card===prevCard&&Date.now()-lastClickTime<100)return;prevCard=card,lastClickTime=Date.now(),selected[card]?($("#card"+card).css(unselectedStyle),delete selected[card]):($("#card"+card).css(selectedStyle),selected[card]=!0),testSelected()}}();function reshuffle(shuffleFn){var score,bestscore=-1e4,saved,i;for(i=0;i<10;++i){do shuffleFn(),score=okDeck();while(!score);if(difficulty==="normal"){saved=cards;break}difficulty==="hard"&&(score=-score),score>bestscore&&(saved=cards.slice(0),bestscore=score)}cards=saved}var logData,curDate;function log(obj){setTimeout(function(){var objDate=obj.now/24/60/60/1e3|0;objDate!==curDate&&(curDate=objDate,logData=JSON.parse(localStorage.getItem("combigamelog"+curDate)||"[]")),logData=logData||[],logData.push(obj),localStorage.setItem("combigamelog"+curDate,JSON.stringify(logData))},0)}function showScore(){fullbrows.start({hideButtons:!0,update:function(){var $t=$("<div>"),log=_(logData).filter(function(elem){return!elem.hint&&elem.difficulty===difficulty}).sort(function(a,b){return a.time-b.time});$t.append($("<h3>Timings\xa0"+difficulty+"</h3>")),log.length===0&&$t.append("<p>No score available for this difficulty, please play the game before looking at the timings.</p>"),partialScore($t,"Today",log),partialScore($t,"Last five minutes",log.filter(function(elem){return Date.now()-elem.now<3e5})),partialScore($t,"Last minute",log.filter(function(elem){return Date.now()-elem.now<6e4})),$t.append("<p>Click to close.</p>"),$("#content").html("").append($t),$t.css({width:"80%",height:"90%"}),webutil.scaleText($t),$t.css({margin:"3% 10% 7% 10%",overflow:"visible"}),$t.bind("mousedown touchstart",fullbrows.startFn(exports.app))}})}function partialScore($t,title,log){log.length>0&&(title&&$t.append($("<div><b>"+title+"</b></div>")),$t.append($("<div>Best time: "+(log[0].time/10|0)/100+"s")),$t.append($("<div>Median time: "+(log[log.length>>1].time/10|0)/100+"s")))}function testSelected(){var list=Object.keys(selected);if(list.length<3)return;if(okSet(list[0],list[1],list[2])){var now=Date.now();log({time:now-prevtime,hint:giveup,cards:cards.slice(0),choosen:list,now:now,difficulty:difficulty}),giveup=!1,prevtime=now,setTimeout(function(){list.forEach(function(id){$("#card"+id).css("opacity",0)})},0),setTimeout(function(){$(".card").css(unselectedStyle);var ids=[_(cards).indexOf(list[0]),_(cards).indexOf(list[1]),_(cards).indexOf(list[2])];reshuffle(function(){for(var i=0;i<3;++i)cards[ids[i]]=randomCard()}),doLayout()},1e3)}else $(".card").css(unselectedStyle);selected={}}function randomCard(){return""+rnd3()+rnd3()+rnd3()+rnd3()}function rnd3(){return Math.random()*3|0}function okSet(a,b,c){for(var i=0;i<4;++i){var ok=a[i]===b[i]&&b[i]===c[i]||a[i]!==b[i]&&b[i]!==c[i]&&c[i]!==a[i];if(!ok)return!1}return!0}function hint(){selected={},$(".card").css(unselectedStyle);var a,b,c;for(a=0;a<10;++a)for(b=a+1;b<11;++b)for(c=b+1;c<12;++c)if(okSet(cards[a],cards[b],cards[c])){$("#card"+cards[a]).css(selectedStyle).css({opacity:.6,background:"#ccc",border:"1px solid #bbb"}),$("#card"+cards[b]).css(selectedStyle).css({opacity:.6,background:"#ccc",border:"1px solid #bbb"}),$("#card"+cards[c]).css(selectedStyle).css({opacity:.6,background:"#ccc",border:"1px solid #bbb"}),giveup=!0;return}}function okDeck(){var cardHash={},a,b,c,i,ok=0;for(i=0;i<12;++i){if(cardHash[cards[i]])return!1;cardHash[cards[i]]=!0}for(a=0;a<10;++a)for(b=a+1;b<11;++b)for(c=b+1;c<12;++c)okSet(cards[a],cards[b],cards[c])&&++ok;return ok}function startGame(){giveup=!1;var $content=$("#content");$content.html(""),prevtime=Date.now();var i,j,k,l;for(i=0;i<3;++i)for(j=0;j<3;++j)for(k=0;k<3;++k)for(l=0;l<3;++l)$content.append($(\x27<img class="card" src="dist/combigame\x27+i+j+k+l+\x27.png" id="card\x27+i+j+k+l+\x27">\x27));$(".card").css({position:"absolute",opacity:"0"}),$(".card").bind("touchstart mousedown",function(e){return click(e.target.id.slice(4)),e.preventDefault(),!0}),difficulty=difficulty||localStorage.getItem("combigameDifficulty")||"normal",fullbrows.addButton({imagePath:"img/help.png",callback:showHelp}),fullbrows.addButton({imagePath:"img/give-up.png",callback:hint}),fullbrows.addButton({imagePath:"img/score.png",callback:showScore}),fullbrows.addButton({text:""+difficulty,callback:showDifficulty});function showHelp(){fullbrows.start({hideButtons:!0,update:function(){var html=require("jsxml").toXml(["div",["h2","CombiGame"],"Game objectives: click on combinations of three figures where color, count, shape, and fill, are either the same or all different.",["br"],["p",["img",{style:"height: 1.5em; width: 1.5em;",src:"img/give-up.png"}]," shows a valid combination among the figures.",["br"],["img",{style:"height: 1.5em; width: 1.5em;",src:"img/difficulty.png"}]," sets difficulty \u2022\xa0easy    : ca. 6 valid combinations \u2022\xa0hard: 1 valid combination \u2022\xa0normal: random number of valid combinations.",["br"],["img",{style:"height: 1.5em; width: 1.5em;",src:"img/score.png"}]," shows latest timing for the current difficulty.",["br"]],"Click to close."]),$t=$("<div>");$t.html(html),$("#content").html("").append($t),$t.css({width:"90%",height:"90%"}),webutil.scaleText($t),$t.css({margin:"2% 5% 8% 5%",overflow:"visible"}),$t.bind("mousedown touchstart",fullbrows.startFn(exports.app))}})}function showDifficulty(){menu({easy:function(){difficulty="easy",fullbrows.start(exports.app)},normal:function(){difficulty="normal",fullbrows.start(exports.app)},hard:function(){difficulty="hard",fullbrows.start(exports.app)}})}localStorage.setItem("combigameDifficulty",difficulty),reshuffle(function(){cards=[];for(var i=0;i<12;++i)cards.push(randomCard())}),doLayout()}function menu(items){fullbrows.start({hideButtons:!0,update:function(){var item,s=Math.min($("#content").height()+$("#content").width()),$menu=$("<div>"),$content=$("#content");$content.html("").append($menu);for(item in items)$menu.append($("<div>").text(item).css({border:"1px solid black","border-radius":s*.02,"text-align":"center",margin:s*.01,padding:s*.01}).bind("click",items[item]));webutil.scaleText($content),$content.css("font-size",parseInt($content.css("font-size"),10)*.8),$menu.css("top",($content.height()-$menu.height())/2),$menu.css("position","absolute"),$menu.css("width","100%")}})}');
bundler.module('scripts/timelog.js','var storage=window.localStorage,$=require("zquery"),_=require("underscore"),util=require("util"),webutil=require("webutil"),fullbrows=require("fullbrows"),timelog,recentLength=2592e6;function callbackFn(name){return function(){console.log(name),setCurrent(name)}}function drawTaskButtons($target,x0,y0,w,h,spacing){console.log(w,h);var tasks=getTaskList(24),current=getCurrent();spacing>>=1;for(var i=0;i<tasks.length;++i){var $button=$("<div>"),text=tasks[i],pad=spacing>>1;$button.text(text).css({margin:0,width:w,height:h,position:"absolute",borderRadius:spacing>>1,backgroundColor:util.colorHash(text),padding:0}),console.log($button[0]),$target.append($button),webutil.scaleText($button),$button.css({display:"inline-block",verticalAlign:"middle",padding:pad,margin:spacing>>1,width:w+"px",position:"relative"}),text===current?$button.css("boxShadow","inset 3px 3px 9px rgba(0, 0, 0, .8)"):($button.css("boxShadow","3px 3px 9px rgba(0, 0, 0, .8)"),$button.bind("touchstart mousedown click",callbackFn(text)))}}function renderUI(){var $content=$("#content");$content.html("").css({textAlign:"center",backgroundColor:"white"}),drawTaskButtons($content,0,0,$(window).width()/6,$(window).height()/10,$(window).width()/40);var usageObj=usage(),report=[];for(var key in usageObj)report.push(usageObj[key]);report=report.reverse(),$("body").append($("<pre>").text(JSON.stringify(report,undefined,"  ")))}function setCurrent(name,id){id=id||Date.now(),console.log("setCurrent",name,id);var elem={id:id,value:name};timelog.changes[id]=elem,addEntry(elem),sync(),renderUI()}function getTaskList(n){var entries=_(timelog.tasks).values().sort(function(a,b){return b.latest-a.latest}).slice(0,n),result=[];return entries=entries.sort(function(a,b){return b.earliest-a.earliest}),_(entries).pluck("value")}function getCurrent(){try{return timelog.recentLog[Math.max.apply(undefined,Object.keys(timelog.recentLog).map(function(e){return+e}))].value}catch(e){return"undefined"}}function usage(){var times=Object.keys(timelog.recentLog).map(function(e){return+e}).sort(),days={},prev=timelog.recentLog[times[0]];return times.forEach(function(time){var day=+time/864e5|0;day=days[day]=days[day]||{};var current=timelog.recentLog[time];day[prev.value]=(day[prev.value]||0)+(current.id-prev.id)/60/60/1e3,prev=current}),days}function save(){var now=Date.now(),recentLog={};Object.keys(timelog.recentLog).filter(function(key){return+key>now-recentLength}).forEach(function(key){recentLog[key]=timelog.recentLog[key]}),timelog.recentLog=recentLog,storage.setItem("timelog",JSON.stringify(timelog)),exports.timelog=timelog}function load(){timelog=JSON.parse(storage.getItem("timelog")||"false"),console.log("timelog:",timelog);if(!timelog){var accountName=window.prompt("Please enter a name/passphrase for your timelog timelog.account. This should be a globally uniq secret name only you should know. Anybody knowing the name can acces the timelog timelog.account. If the name does not exist already, a new timelog will be created");if(!accountName)return;timelog={account:accountName,lastTime:0,recentLog:{},tasks:{},changes:{}}}}function addEntry(elem){timelog.recentLog[elem.id]=elem;var task=timelog.tasks[elem.value]||{value:elem.value,earliest:elem.id,latest:0};task.latest=Math.max(task.latest,elem.id),timelog.tasks[elem.value]=task}function syncCallback(eventArr){if(eventArr.error){delete timelog.changes[eventArr.id];return}eventArr.forEach(function(elem){timelog.lastTime=Math.max(timelog.lastTime,elem.timestamp),addEntry(elem),timelog.changes[elem.id]&&delete timelog.changes[elem.id]}),(eventArr.length===1e3||Object.keys(timelog.changes).length>0)&&sync(),save(),renderUI()}function sync(){var elem=!1;Object.keys(timelog.changes).length>0&&(elem=timelog.changes[Object.keys(timelog.changes)[0]]);var url="https://rasmuserik-timelog.appspot.com/?name="+timelog.account+"&since="+timelog.lastTime;elem&&(url+="&id="+elem.id+"&value="+window.escape(elem.value)),url+="&callback=?",$.ajax({url:url,success:syncCallback})}exports.sync=sync,exports.app={type:"scrollable",start:function(){load(),sync(),console.log(getTaskList(16)),console.log(getCurrent()),console.log(usage()),this.update()},update:renderUI}');
bundler.module('scripts/notescore.js','var $=require("zquery");exports.app={orientation:"portrait",start:function(){$("body").css("background","#fff");var width,height,startpos,notedwidth,notecount=6,notes,noteid,noteheight,clef=Math.random()>.5?"f":"g";function clearImage(){$("#content").html("")}function drawImg(url,x,y,w,h){var img=$("<img>").attr("src","img/"+url).css("position","absolute").css("left",Math.round(x)+"px").css("top",Math.round(y)+"px").css("width",Math.round(w)+"px").css("height",Math.round(h)+"px");$("#content").append(img)}function drawNote(position,value,img){var x=startpos+position*(width-startpos)/notecount,y=(17-value)*noteheight/24,w=(width-startpos)*.7/notecount,h=0|noteheight/11,i;for(i=0;i>=value;i-=2)drawImg("blackbox.png",x-w*.15,0|(18-i)*noteheight/24,w*1.3,2);for(i=2;i<=value;i+=2)drawImg("blackbox.png",x-w*.15,0|(18-i)*noteheight/24,w*1.3,2);drawImg(img,x,y,w,h)}function draw(){var i;clearImage(),width=window.innerWidth,height=window.innerHeight,width>height*.8&&(width=0|height*.8),noteheight=0|.381966011*height,startpos=width/4;var imgheight=height-noteheight;drawImg("keys.jpg",0,noteheight,width,imgheight),drawImg(clef+"clef.png",0,0,width/6,noteheight);for(i=4;i<9;++i)drawImg("blackbox.png",0,0|i*noteheight/12,width,2);for(i=0;i<notecount;++i)drawNote(i,notes[i],"note.png")}function genNotes(){noteid=0,clef==="f"?clef="g":clef="f",notes=[];for(var i=0;i<notecount;++i)notes[i]=Math.random()*23-5|0}function main(){console.log("here"),genNotes(),draw(),"ontouchstart"in document.documentElement?$("#content").bind("touchstart",handleEvent):$("#content").bind("mousedown",handleEvent)}function handleEvent(e){var clientY,clientX;try{clientY=e.originalEvent.touches[0].clientY,clientX=e.originalEvent.touches[0].clientX}catch(e){}clientY=clientY||e.clientY,clientX=clientX||e.clientX;if(!clientY||!clientX){var str="";for(var x in e)str+=", "+x+": "+e[x]}if(clientY<noteheight){clientY<noteheight/4&&(genNotes(),draw());return}var pos=0|clientX/width*8;pos+=8*(0|4*(clientY-noteheight)/(height-noteheight));var noteMap=[6,7,7,9,9,11,11,12,6,6,8,8,10,10,12,12,12,0,1,1,3,3,4,6,12,0,0,2,2,4,4,6],names="cdefgab";console.log(names.charAt(noteMap[pos]>>1)+(noteMap[pos]&1?"#":""));var note=noteMap[pos]>>1;clef==="f"&&(note=(note+5)%7);var curnote=notes[noteid];if(note===(7+curnote)%7)drawNote(noteid,curnote,"note-green.png"),++noteid;else{note>=2&&(note-=7);if(curnote>0)while(note<=10&&Math.abs(note-curnote)>4)note+=7;drawNote(noteid,note,"red-splat.png")}console.log(noteid,notecount),noteid>=notecount&&(genNotes(),setTimeout(draw,100))}$(main)}}');
bundler.module('scripts/dkcities.js','var $=require("zquery");exports.app={start:function(){var locations,corrects;function f(xs){var result=[];for(var x in xs)result.push([x,(xs[x].lng-7.5)*240,960-(xs[x].lat-54)*240]);locations=result}f({"R\xf8dby":{lng:11.39999961853027,lat:54.70000076293945},"S\xf8nderborg":{lng:9.783333778381348,lat:54.90000152587891},Svendborg:{lng:10.60841369628906,lat:55.0597038269043},Aakirkeby:{lng:14.91666698455811,lat:55.070556640625},"Nex\xf8":{lng:15.13194465637207,lat:55.0625},"R\xf8nne":{lng:14.70138931274414,lat:55.09860992431641},"Pr\xe6st\xf8":{lng:12.05000019073486,lat:55.11666488647461},Glamsbjerg:{lng:10.11666679382324,lat:55.26666641235352},Fuglebjerg:{lng:11.56666660308838,lat:55.29999923706055},"Kors\xf8r":{lng:11.14999961853027,lat:55.33333206176758},Langeskov:{lng:10.58615875244141,lat:55.35675430297852},"Sor\xf8":{lng:11.56666660308838,lat:55.43333435058594},"K\xf8ge":{lng:12.18333339691162,lat:55.45000076293945},Kerteminde:{lng:10.66666698455811,lat:55.45000076293945},Middelfart:{lng:9.75,lat:55.5},"H\xf8ng":{lng:11.30000019073486,lat:55.51666641235352},"G\xf8rlev":{lng:11.23333358764648,lat:55.53333282470703},Fredericia:{lng:9.766666412353516,lat:55.58333206176758},"Fl\xf8ng":{lng:12.18333339691162,lat:55.66666793823242},Frederiksberg:{lng:12.53333377838135,lat:55.66666793823242},Kalundborg:{lng:11.10000038146973,lat:55.68333435058594},Frederikssund:{lng:12.05000019073486,lat:55.83333206176758},Slangerup:{lng:12.18333339691162,lat:55.84999847412109},"Niv\xe5":{lng:12.51666641235352,lat:55.93333435058594},"Frederiksv\xe6rk":{lng:12.03333377838135,lat:55.96666717529297},Hundested:{lng:11.86666679382324,lat:55.96666717529297},"Esperg\xe6rde":{lng:12.56666660308838,lat:56},"Helsing\xf8r":{lng:12.61666679382324,lat:56.03333282470703},"Kib\xe6k":{lng:8.850000381469727,lat:56.03333282470703},Skanderborg:{lng:9.933333396911621,lat:56.03333282470703},"Ringk\xf8bing":{lng:8.25,lat:56.08333206176758},Gilleleje:{lng:12.31666660308838,lat:56.11666488647461},Silkeborg:{lng:9.566666603088379,lat:56.16666793823242},"R\xf8nde":{lng:10.48333358764648,lat:56.29999923706055},Holstebro:{lng:8.369999885559082,lat:56.22000122070312},"Gren\xe5":{lng:10.88333320617676,lat:56.41666793823242},Assentoft:{lng:10.14999961853027,lat:56.43333435058594},"Nyk\xf8bing Mors":{lng:8.859167098999023,lat:56.7952766418457},Dronninglund:{lng:10.30000019073486,lat:57.15000152587891},"S\xe6by":{lng:10.53233337402344,lat:57.32952499389648},Frederikshavn:{lng:10.53972244262695,lat:57.44111251831055},Hirtshals:{lng:9.949999809265137,lat:57.58333206176758},"K\xf8benhavn":{lng:12.56833362579346,lat:55.67610931396484},"Lang\xe5":{lng:9.894000053405762,lat:56.39300155639648},Them:{lng:9.550000190734863,lat:56.09999847412109},"Birker\xf8d":{lng:12.43333339691162,lat:55.83333206176758},Ullerslev:{lng:10.66666698455811,lat:55.36333465576172},"Fars\xf8":{lng:9.350000381469727,lat:56.78333282470703},"\xd8lgod":{lng:8.616666793823242,lat:55.81666564941406},"H\xf8jer":{lng:8.716666221618652,lat:54.96666717529297},"Hiller\xf8d":{lng:12.31666660308838,lat:55.93333435058594},Aggersund:{lng:9.300000190734863,lat:57},Hanstholm:{lng:8.619999885559082,lat:57.11999893188477},Billund:{lng:9.115278244018555,lat:55.7308349609375},Havrebjerg:{lng:11.33333301544189,lat:55.43333435058594},"\xc5lsg\xe5rde":{lng:12.53694438934326,lat:56.07666778564453},"Tj\xe6reborg":{lng:8.586999893188477,lat:55.4630012512207},"L\xe5sby":{lng:9.816666603088379,lat:56.15000152587891},"S\xf8ften":{lng:10.10000038146973,lat:56.23333358764648},Struer:{lng:8.616666793823242,lat:56.48333358764648},Skjern:{lng:8.5,lat:55.95000076293945},Aalestrup:{lng:9.5,lat:56.70000076293945},Blenstrup:{lng:10,lat:56.86666488647461},"B\xe6lum":{lng:10.11666679382324,lat:56.83333206176758},Beder:{lng:10.21666622161865,lat:56.06666564941406},"Krus\xe5":{lng:9.402222633361816,lat:54.84916687011719},Vestervig:{lng:8.318611145019531,lat:56.76361083984375},"Veks\xf8":{lng:12.23944473266602,lat:55.75416564941406},"T\xe5rs":{lng:10.10000038146973,lat:57.38333511352539},"Ish\xf8j":{lng:12.35124969482422,lat:55.6158332824707},"N\xe6rum":{lng:12.55000019073486,lat:55.81666564941406},Hedensted:{lng:9.683333396911621,lat:55.76666641235352},"R\xf8dekro":{lng:9.350000381469727,lat:55.06666564941406},"N\xe6stved":{lng:11.76666641235352,lat:55.23333358764648},Ringe:{lng:10.48027801513672,lat:55.23749923706055},Ribe:{lng:8.762177467346191,lat:55.32837677001953},Strib:{lng:9.783333778381348,lat:55.53333282470703},"Holb\xe6k":{lng:11.71666622161865,lat:55.71666717529297},Farum:{lng:12.39051818847656,lat:55.81382369995117},Give:{lng:9.237222671508789,lat:55.84500122070312},Odder:{lng:10.16666698455811,lat:55.96666717529297},Gjern:{lng:9.75,lat:56.23333358764648},Hobro:{lng:9.800000190734863,lat:56.63333511352539},Aars:{lng:9.533333778381348,lat:56.79999923706055},"L\xf8gst\xf8r":{lng:9.25,lat:56.96666717529297},Nibe:{lng:9.633333206176758,lat:56.98333358764648},Aarup:{lng:10.03333377838135,lat:55.36666488647461},Gudme:{lng:10.71666622161865,lat:55.15000152587891},"N\xf8rager":{lng:9.616666793823242,lat:56.70000076293945},"Videb\xe6k":{lng:8.633333206176758,lat:56.08333206176758},"Hvals\xf8":{lng:11.85000038146973,lat:55.59999847412109},"L\xf8gumkloster":{lng:8.949999809265137,lat:55.04999923706055},"R\xf8nnede":{lng:12,lat:55.25},Vejle:{lng:9.533333778381348,lat:55.71666717529297},Borre:{lng:12.43333339691162,lat:54.98333358764648},Lyne:{lng:8.5,lat:55.79999923706055},Kvong:{lng:8.449999809265137,lat:55.76666641235352},Virum:{lng:12.46666622161865,lat:55.79999923706055},Sall:{lng:9.824999809265137,lat:56.27861022949219},Ikast:{lng:9.149999618530273,lat:56.15000152587891},Skive:{lng:9.033333778381348,lat:56.56666564941406},"Drag\xf8r":{lng:12.66666698455811,lat:55.58333206176758},"Store Magleby":{lng:12.63527774810791,lat:55.59611129760742},Ranum:{lng:9.233333587646484,lat:56.90000152587891},"Tommerup Stationsby":{lng:10.18099975585938,lat:55.35100173950195},"T\xf8nder":{lng:8.86388874053955,lat:54.94277954101562},"S\xf8ller\xf8d":{lng:12.51666641235352,lat:55.81666564941406},"R\xf8dbyhavn":{lng:11.35000038146973,lat:54.65000152587891},Aulum:{lng:8.800000190734863,lat:56.26666641235352},"Sk\xe6lsk\xf8r":{lng:11.30000019073486,lat:55.25},"Vallensb\xe6k":{lng:12.36666679382324,lat:55.63333511352539},Faxe:{lng:12.11944484710693,lat:55.25527954101562},"T\xe5rnby":{lng:12.60000038146973,lat:55.63333511352539},"Saksk\xf8bing":{lng:11.64999961853027,lat:54.79999923706055},Padborg:{lng:9.355833053588867,lat:54.82277679443359},Nakskov:{lng:11.14999961853027,lat:54.83333206176758},Marstal:{lng:10.51666641235352,lat:54.84999847412109},Broager:{lng:9.683333396911621,lat:54.88333511352539},"Rudk\xf8bing":{lng:10.71666622161865,lat:54.93333435058594},Aabenraa:{lng:9.433333396911621,lat:55.03333282470703},Bredebro:{lng:8.833333015441895,lat:55.04999923706055},Nordborg:{lng:9.75,lat:55.04999923706055},Faaborg:{lng:10.23333358764648,lat:55.09999847412109},Svaneke:{lng:15.14305591583252,lat:55.13666534423828},Ryslinge:{lng:10.55000019073486,lat:55.25},Christiansfeld:{lng:9.483333587646484,lat:55.34999847412109},Slagelse:{lng:11.37383365631104,lat:55.40497207641602},Munkebo:{lng:10.56666660308838,lat:55.45000076293945},Ringsted:{lng:11.81666660308838,lat:55.45000076293945},Bramming:{lng:8.699999809265137,lat:55.46666717529297},Esbjerg:{lng:8.449999809265137,lat:55.48333358764648},Kolding:{lng:9.5,lat:55.49166488647461},Otterup:{lng:10.39999961853027,lat:55.51666641235352},Bogense:{lng:10.10000038146973,lat:55.56666564941406},Ballerup:{lng:12.36666679382324,lat:55.73333358764648},Jelling:{lng:9.42361068725586,lat:55.76263427734375},Jyllinge:{lng:12.11666679382324,lat:55.75},Horsens:{lng:9.833333015441895,lat:55.86666488647461},"Sk\xe6vinge":{lng:12.16666698455811,lat:55.91666793823242},"Nyk\xf8bing Sj\xe6lland":{lng:11.66666698455811,lat:55.92499923706055},Herning:{lng:8.983333587646484,lat:56.15000152587891},Ebeltoft:{lng:10.67805576324463,lat:56.19361114501953},Hinnerup:{lng:10.0649995803833,lat:56.27249908447266},Hadsten:{lng:10.05000019073486,lat:56.33333206176758},Randers:{lng:10.05000019073486,lat:56.46666717529297},Hadsund:{lng:10.11666679382324,lat:56.71666717529297},Aalborg:{lng:9.916666984558105,lat:57.04999923706055},Aabybro:{lng:9.75,lat:57.15000152587891},"Br\xf8nderslev":{lng:9.966666221618652,lat:57.26666641235352},"Hj\xf8rring":{lng:9.999160766601562,lat:57.47978210449219},Roskilde:{lng:12.08333301544189,lat:55.65000152587891},Mariager:{lng:10,lat:56.65000152587891},Hasle:{lng:14.70416641235352,lat:55.18333435058594},"\xd8lstykke":{lng:12.15582466125488,lat:55.79203796386719},"\xc5rslev":{lng:10.46033954620361,lat:55.29671859741211},"\xd8rb\xe6k":{lng:10.67027759552002,lat:55.25722122192383},Tommerup:{lng:10.21278953552246,lat:55.32120132446289},Pandrup:{lng:9.683333396911621,lat:57.23333358764648},"Sk\xf8rping":{lng:9.883333206176758,lat:56.83333206176758},Holsted:{lng:8.917778015136719,lat:55.51027679443359},Augustenborg:{lng:9.883333206176758,lat:54.95000076293945},"Sk\xe6rb\xe6k":{lng:8.767999649047852,lat:55.15700149536133},Tinglev:{lng:9.25,lat:54.93333435058594},"Langeb\xe6k":{lng:12.10000038146973,lat:55},Jystrup:{lng:11.88333320617676,lat:55.51666641235352},Hoven:{lng:8.759166717529297,lat:55.85083389282227},Blokhus:{lng:9.583333015441895,lat:57.25},Tune:{lng:12.18333339691162,lat:55.59999847412109},Brabrand:{lng:10.11666679382324,lat:56.15000152587891},"N\xf8rre Nebel":{lng:8.300000190734863,lat:55.78333282470703},Byrum:{lng:10.98333358764648,lat:57.25},Tisvilde:{lng:12.0847225189209,lat:56.05222320556641},Thisted:{lng:8.699999809265137,lat:56.95000076293945},"Br\xf8ndbyvester":{lng:12.41638851165771,lat:55.65472412109375},Vorbasse:{lng:9.083333015441895,lat:55.63333511352539},"\xd8lsted":{lng:12.07083320617676,lat:55.92194366455078},Gummerup:{lng:10.13333320617676,lat:55.25},Kastrup:{lng:12.64166641235352,lat:55.63750076293945},Bredsten:{lng:9.381111145019531,lat:55.70194625854492},"Br\xf8nsh\xf8j":{lng:12.49820518493652,lat:55.70417404174805},Givskud:{lng:9.333333015441895,lat:55.79999923706055},Charlottenlund:{lng:12.55194473266602,lat:55.75055694580078},Sulsted:{lng:9.966666221618652,lat:57.15000152587891},"Vester Hassing":{lng:10.125,lat:57.06666564941406},Hornslet:{lng:10.33333301544189,lat:56.31666564941406},Gandrup:{lng:10.1783332824707,lat:57.05833435058594},"S\xe6rslev":{lng:10.26666641235352,lat:55.48333358764648},"M\xf8gelt\xf8nder":{lng:8.816666603088379,lat:54.93333435058594},Kokkedal:{lng:12.48999977111816,lat:55.90800094604492},Vamdrup:{lng:9.283333778381348,lat:55.41666793823242},Hatting:{lng:9.766666412353516,lat:55.84999847412109},Nysted:{lng:11.75,lat:54.66666793823242},Holeby:{lng:11.46666622161865,lat:54.71666717529297},Maribo:{lng:11.51666641235352,lat:54.76666641235352},"Stubbek\xf8bing":{lng:12.05000019073486,lat:54.88333511352539},"Gr\xe5sten":{lng:9.600000381469727,lat:54.91666793823242},Karise:{lng:12.19777774810791,lat:55.30694580078125},Nyborg:{lng:10.78333377838135,lat:55.29999923706055},Haslev:{lng:11.96666622161865,lat:55.33333206176758},Odense:{lng:10.38853645324707,lat:55.39596557617188},"S\xf8nders\xf8":{lng:10.26666641235352,lat:55.48333358764648},Skibby:{lng:11.95899963378906,lat:55.74900054931641},"Kongens Lyngby":{lng:12.5,lat:55.77000045776367},"J\xe6gerspris":{lng:11.98333358764648,lat:55.84999847412109},Brande:{lng:9.116666793823242,lat:55.95000076293945},"R\xf8rvig":{lng:11.76666641235352,lat:55.95000076293945},Aarhus:{lng:10.21666622161865,lat:56.15719985961914},Skejby:{lng:10.18333339691162,lat:56.20000076293945},Hammel:{lng:9.866666793823242,lat:56.25},"Hjortsh\xf8j":{lng:10.26666641235352,lat:56.25},Lemvig:{lng:8.316666603088379,lat:56.54999923706055},"St\xf8vring":{lng:9.831000328063965,lat:56.88899993896484},Sindal:{lng:10.21666622161865,lat:57.46666717529297},Skagen:{lng:10.59786128997803,lat:57.72312164306641},"H\xf8rning":{lng:10.03555583953857,lat:56.08499908447266},"Stenl\xf8se":{lng:12.19722175598145,lat:55.7672233581543},"\xc6r\xf8sk\xf8bing":{lng:10.41250038146973,lat:54.89166641235352},Assens:{lng:9.899999618530273,lat:55.26666641235352},Haarby:{lng:10.11666679382324,lat:55.21666717529297},Vissenbjerg:{lng:10.13333320617676,lat:55.38333511352539},Brovst:{lng:9.533333778381348,lat:57.09999847412109},Fjerritslev:{lng:9.266666412353516,lat:57.08333206176758},Arden:{lng:9.858888626098633,lat:56.76972198486328},"Br\xf8rup":{lng:9.01805591583252,lat:55.48305511474609},"N\xf8rre Alslev":{lng:11.89999961853027,lat:54.90000152587891},"Greve Strand":{lng:12.30000019073486,lat:55.56666564941406},Viborg:{lng:9.399999618530273,lat:56.45000076293945},"Snogh\xf8j":{lng:9.716666221618652,lat:55.51666641235352},Gedved:{lng:9.850000381469727,lat:55.93333435058594},Stege:{lng:12.30000019073486,lat:54.98333358764648},Malling:{lng:10.18333339691162,lat:56.03333282470703},"N\xf8rre Aaby":{lng:9.899999618530273,lat:55.45000076293945},Egtved:{lng:9.300000190734863,lat:55.61666488647461},Ry:{lng:9.764100074768066,lat:56.09177017211914},Galten:{lng:9.904999732971191,lat:56.15638732910156},Nordby:{lng:8.399999618530273,lat:55.43333435058594},"B\xe5ring":{lng:9.916666984558105,lat:55.5},Foulum:{lng:9.583333015441895,lat:56.5},"Gr\xe6sted":{lng:12.28333377838135,lat:56.06666564941406},Fredensborg:{lng:12.39999961853027,lat:55.96666717529297},Taulov:{lng:9.616666793823242,lat:55.54999923706055},Dybvad:{lng:10.36666679382324,lat:57.28333282470703},"L\xf8sning":{lng:9.699999809265137,lat:55.79999923706055},Skamby:{lng:10.26666641235352,lat:55.48333358764648},"Vedb\xe6k":{lng:12.5649995803833,lat:55.85300064086914},Ortved:{lng:11.85000038146973,lat:55.48333358764648},Outrup:{lng:8.339166641235352,lat:55.71888732910156},"Tr\xf8r\xf8d":{lng:12.55000019073486,lat:55.83333206176758},"Thybor\xf8n":{lng:8.216666221618652,lat:56.70000076293945},Snekkersten:{lng:12.60000038146973,lat:56},Tranebjerg:{lng:10.60000038146973,lat:55.83333206176758},Tranbjerg:{lng:8.699999809265137,lat:55.58333206176758},"H\xf8jby":{lng:11.58333301544189,lat:55.90000152587891},Storvorde:{lng:10.08333301544189,lat:57},"Liller\xf8d":{lng:12.35000038146973,lat:55.86666488647461},Skodsborg:{lng:12.56666660308838,lat:55.81666564941406},Karlslunde:{lng:12.23333358764648,lat:55.56666564941406},"Gjess\xf8":{lng:9.5,lat:56.11666488647461},"Faxe Ladeplads":{lng:12.16666698455811,lat:55.21666717529297},Uggerslev:{lng:10.33333301544189,lat:55.48333358764648},"Solr\xf8d Strand":{lng:12.21666622161865,lat:55.51666641235352},Ravnkilde:{lng:9.766666412353516,lat:56.75},Tarm:{lng:8.519721984863281,lat:55.90750122070312},"R\xf8dovre":{lng:12.45499992370605,lat:55.68138885498047},Varde:{lng:8.483333587646484,lat:55.63333511352539},"\xc5lb\xe6k":{lng:10.41666698455811,lat:57.58333206176758},"Hvide Sande":{lng:8.133333206176758,lat:55.98333358764648},"Bagsv\xe6rd":{lng:12.45777797698975,lat:55.76444625854492},"Allinge-Sandvig":{lng:14.80138874053955,lat:55.27777862548828},Tejn:{lng:14.83333301544189,lat:55.23333358764648},Vemb:{lng:8.333333015441895,lat:56.33333206176758},"Hornb\xe6k":{lng:12.44999980926514,lat:56.09166717529297},Hvorslev:{lng:9.767000198364258,lat:56.36600112915039},Jyderup:{lng:11.39999961853027,lat:55.65000152587891},"S\xf8nderho":{lng:8.466666221618652,lat:55.34944534301758},Birkende:{lng:10.58333301544189,lat:55.38333511352539},"Sm\xf8rumnedre":{lng:12.30000019073486,lat:55.73333358764648},"\xd8stermarie":{lng:15,lat:55.13333511352539},Tirstrup:{lng:10.68333339691162,lat:56.29999923706055},"Andk\xe6r":{lng:9.633333206176758,lat:55.66666793823242},"Store Merl\xf8se":{lng:11.71666622161865,lat:55.54999923706055},Gudhjem:{lng:14.97194480895996,lat:55.21027755737305},Aarsdale:{lng:15.14444446563721,lat:55.1058349609375},"Klitm\xf8ller":{lng:8.5,lat:57.03333282470703},Hemmet:{lng:8.516666412353516,lat:55.90000152587891},Skarrild:{lng:8.897500038146973,lat:55.97833251953125}}),function(){var map="img/denmark.jpg",norm=[1920,960],locsrc=locations,zoomfactor=3;(function(){for(var i=0;i<locations.length;++i)locations[i][1]/=norm[0],locations[i][2]/=norm[1]})();var quizvalue=0,cursorDown=!1,zoomedin=!1,prevx,prevy,imposx,imposy,mapDom,imwidth,imheight,viewwidth,viewheight,logosz,clickx,clicky,clicktime,namesize=Math.round($(window).width()/8),textsize=Math.round(namesize/3),count=7;function shuffle(){var i,j,result=[];locations=[];for(i=0;i<count;++i){var loc=locsrc[Math.floor(Math.random()*locsrc.length)];locations[i]=loc;for(j=0;j<i;++j)Math.abs(loc[1]-locations[j][1])+Math.abs(loc[2]-locations[j][2])<.1&&(j=--i)}}function imbounds(){imposx>0&&(imposx=0),imposy>0&&(imposy=0),imposx<viewwidth-imwidth&&(imposx=viewwidth-imwidth),imposy<viewheight-imheight&&(imposy=viewheight-imheight)}function downEvent(x,y){if(cursorDown)return;cursorDown=!0,viewwidth=$(window).width(),viewheight=$(window).height(),namesize=Math.round($(window).width()/8),clickx=x,clicky=y,clicktime=(new Date).getTime(),zoomedin?(prevx=x,prevy=y):zoomin(x,y)}function upEvent(x,y){console.log("upevent");if(!cursorDown)return;cursorDown=!1;if(!zoomedin)return;var clickduration=(new Date).getTime()-clicktime,dx=prevx-clickx,dy=prevy-clicky,movement=Math.sqrt(dx*dx+dy*dy);if(clickduration<500&&movement<viewwidth/10){var result=nearest((prevx-imposx)/imwidth,(prevy-imposy)/imheight);answer(result===quizvalue,quizvalue)}}function answer(ok,question){var newquiz;corrects[question]=ok,console.log("question",locations[question]);var allok=!0;for(var i=0;i<count;++i)allok=allok&&corrects[i];allok&&shuffle();do newquiz=Math.floor(Math.random()*count),corrects[newquiz]&&(newquiz=Math.floor(Math.random()*count)),corrects[newquiz]&&(newquiz=Math.floor(Math.random()*count));while(newquiz===question);console.log("newquiz",locations[newquiz],corrects[newquiz]),quizvalue=newquiz,$("#cityname").css("color",ok?"#44aa44":"#cc3333"),zoomout(function(){function slidein(){console.log(Date.now()),$("#cityname").text(locations[newquiz][0]).css("font-size",namesize).css("color","white").css("left",viewwidth).css("width",viewwidth).css("top",Math.round(viewheight/2-namesize)),setTimeout(function(){$("#cityname").animate({left:0})},0)}console.log("ok",ok),ok?(console.log(Date.now()),$("#cityname").animate({top:viewheight,left:0,"font-size":namesize*2,width:viewwidth}),setTimeout(slidein,500)):(console.log(Date.now(),question,locations[question]),$("#cityname").animate({top:locations[question][2]*viewheight,left:locations[question][1]*viewwidth,"font-size":0,width:0}),setTimeout(slidein,500))})}var locationimgs;function moveEvent(x,y){if(!cursorDown)return;console.log("moveEvent "+x+", "+y);if(!zoomedin)return;imposx+=x-prevx,imposy+=y-prevy,prevx=x,prevy=y,imbounds(),mapDom.style.top=imposy+"px",mapDom.style.left=imposx+"px",locationimgs=$("#locations")[0].children;for(var i=0;i<count;++i)locationimgs[i].style.left=(0|locations[i][1]*imwidth+imposx-.5*logosz)+"px",locationimgs[i].style.top=(0|locations[i][2]*imheight+imposy-.5*logosz)+"px"}function animate(fn){$("#map").animate({left:imposx,top:imposy,width:imwidth,height:imheight}),setTimeout(fn,500);for(var i=0;i<count;++i)$("#loc"+i).attr("src","img/location.png").css("z-index",-1).css("position","fixed").animate({width:logosz,height:logosz,left:locations[i][1]*imwidth+imposx-.5*logosz,top:locations[i][2]*imheight+imposy-.5*logosz});$("#loc"+i).css("left",viewwidth)}function nearest(x,y){var dist=100,result;for(var i=0;i<count;++i){var loc=locations[i],dist2=(loc[1]-x)*(loc[1]-x)+(loc[2]-y)*(loc[2]-y);dist2<dist&&(result=i,dist=dist2)}return result}function zoomin(x,y){imposy=Math.round(viewheight/2-zoomfactor*y),imposx=Math.round(viewwidth/2-zoomfactor*x),imwidth=zoomfactor*viewwidth,imheight=zoomfactor*viewheight,imbounds(),logosz=Math.round(viewwidth/10),animate(function(){zoomedin=!0}),$("#cityname").animate({top:0,"font-size":textsize})}function zoomout(fn){viewwidth=$(window).width(),viewheight=$(window).height(),imposy=0,imposx=0,imwidth=viewwidth,imheight=viewheight,logosz=Math.round(viewwidth/zoomfactor/10),animate(function(){zoomedin=!1}),$("#cityname").animate({top:Math.round(viewheight/2-namesize),"font-size":namesize,width:$(window).width()-namesize}),setTimeout(fn,500)}function init(){var i;viewwidth=$(window).width(),viewheight=$(window).height(),corrects=[];for(i=0;i<count;++i)corrects[i]=!0;shuffle(),$("#content").html(\x27<img src="img/denmark.jpg" id=map><div id="cityname"></div><div id="locations"></div>\x27);var locstr="";for(i=0;i<count;++i)locstr+=\x27<image id="loc\x27+i+\x27">\x27;$("#locations").html(locstr),$("#map").css("position","fixed").css("user-select","none").css("z-index",-2).css("top",$(window).height()/2).css("left",$(window).width()/2).css("width",0).css("height",0),mapDom=$("#map")[0],$("#cityname").css("position","fixed").css("text-align","center").css("top",-namesize*1.5).css("font-size",namesize).css("width",$(window).width()-namesize).html("Danske&nbsp;byer").css("text-shadow","0 0 .2ex black"),answer(!0,0)}function main(){init(),registerEvents(),zoomout(function(){console.log("here")})}function registerEvents(){function xyWrapper(fn){return function(e){var clientY,clientX;try{clientY=e.originalEvent.touches[0].clientY,clientX=e.originalEvent.touches[0].clientX}catch(e){}return clientY=clientY||e.clientY,clientX=clientX||e.clientX,fn(clientX,clientY),!1}}"ontouchstart"in document.documentElement?$("#content").bind("touchstart",xyWrapper(downEvent)):$("#content").bind("mousedown",xyWrapper(downEvent)),$("#content").bind("mouseout mouseup touchend",xyWrapper(upEvent)),"ontouchmove"in document.documentElement?$("#content").bind("touchmove",xyWrapper(moveEvent)):$("#content").bind("mousemove",xyWrapper(moveEvent))}$(main)}()}}');
bundler.module('scripts/julia4d.js','var running;exports.app={underbar:!0,type:"canvas",start:function(){running=!0,julia4d(this.elem)},stop:function(){running=!1}};function julia4d(canvas){var pts=[];(function(){var k;function sign(x){return x>0?1:-1}var w0,wi0,w1,wi1;w0=wi0=w1=wi1=0,newpts();function newpts(){w0+=Math.random()-.5,wi0+=Math.random()-.5,w1+=Math.random()-.5,wi1+=Math.random()-.5,k=0,setTimeout(drawpts,0)}function drawpts(){var kcount=3e4;for(;;){if(!running)return;var Newz,Newzi,random=Math.random,sqrt=Math.sqrt,w=k/kcount*w0+(1-k/kcount)*w1,wi=k/kcount*wi0+(1-k/kcount)*wi1,z=random()*2-1,zi=random()*2-1;for(var j=0;j<20;++j){var Cx=w,Cy=wi;z-=Cx,zi-=Cy,z>0?(Newz=sqrt((z+sqrt(z*z+zi*zi))/2),Newzi=zi/(2*Newz)):z<0?(Newzi=sign(zi)*sqrt((-z+sqrt(z*z+zi*zi))/2),Newz=zi/(2*Newzi)):(Newz=sqrt(Math.abs(zi)/2),Newz>0?Newzi=zi/(2*Newz):Newzi=0),random()<.5?(z=Newz,zi=Newzi):(z=-Newz,zi=-Newzi),pts[k]={x:z/8,y:zi/8,z:k/kcount/2-.25}}++k;if(k%300===0){k<kcount?setTimeout(drawpts,0):setTimeout(newpts,0);return}}}})(),function(){var ctx=canvas.getContext("2d"),width=canvas.width=512,height=canvas.height=512,image=ctx.getImageData(0,0,width,height),pixels=image.data,baseAngle=0;function transform(pt){var a1=.005*baseAngle,a2=.01*baseAngle,x=pt.x*Math.cos(a1)-pt.y*Math.sin(a1),y=pt.x*Math.sin(a1)+pt.y*Math.cos(a1),z=x*Math.sin(a2)+pt.z*Math.cos(a2);return x=x*Math.cos(a2)-pt.z*Math.sin(a2),{x:x,y:y,z:z}}function increasePixel(x,y){0<x&&x<width&&(pixels[((y|0)*width+(x|0))*4+0]+=50)}function clear(){for(var i=0;i<pixels.length;i+=4)pixels[i]=0,pixels[i+3]=255}function drawToScreen(){if(!running)return;clear();for(var i=0;i<pts.length;++i){var p=pts[i];p=transform(p),increasePixel((p.x+.5)*width,(p.y+.5)*height)}++baseAngle,ctx.putImageData(image,0,0),setTimeout(drawToScreen,20)}drawToScreen()}()}');
bundler.module('scripts/rasmuserik.js','var $=require("zquery");exports.app={update:function(){this.$.html(require("jsxml").toXml(["div",{id:"rasmuserik",style:"width: 85%; height: 100%; position: absolute"},["div",{style:"font-size: 200%; padding: 2ex 0pt 0pt 5%;"},"Rasmus Erik @ solsort.dk"],["div",{style:"font-size: 95%; margin-top: -0.5ex;padding: 0pt 0pt 0pt 5%;"},"Muldager 32 2th, DK-2700 Br\xf8nsh\xf8j. +45 60703081"],["div",{style:"font-size: 150%; padding: 2ex 0 2ex 5%;"},"- software developer at DBC a/s,",["br"],"and freelance computer scientist."],["div",{"class":"section",style:"font-size: 80%; padding: 0 0 2ex 0"},"Current areas of focus:",["div","Mobile and web-apps \u2022 development, teaching, and strategy"],["div","Open Source \u2022 infrastructure, and reusing existing solutions"],["div","JavaScript \u2022 consulting, best practises, and scripting engines"]]])),$(".section div").css("padding","1ex 0 0 5%"),$("#content div").css("white-space","nowrap");var $rasmuserik=$("#rasmuserik");$rasmuserik.width()>500&&$rasmuserik.css({left:$rasmuserik.width()-500>>1,width:500}),require("webutil").scaleText($rasmuserik),$rasmuserik.css("height","auto"),$rasmuserik.css({top:this.$.height()-$rasmuserik.height()>>2,overflow:"visible",marginLeft:"5%"})}}');
bundler.module('scripts/rain.js','var running;exports.app={underbar:!0,type:"canvas",start:function(){running=!0;var c=this.elem,a=c.getContext("2d"),size=c.width=c.height=256,image=a.getImageData(0,0,size,size),imageBuffer=image.data,g=[],h=[];f();function f(){if(running){var pos=Math.random()*size*size|0;g[pos]=g[pos+1]=g[pos+2]=g[size+pos+1]=g[2*size+pos+1]=127;var t=g;g=h,h=t;for(var i=0;i<size*size;++i)h[i]=((g[i-1]+g[i+1]+g[i-size]+g[i+size])/2-h[i])*.99||0,imageBuffer[i*4+3]=255,imageBuffer[i*4+2]=255&128+h[i]-h[i-size-1];a.putImageData(image,0,0),setTimeout(f,0)}}},stop:function(){running=!1}}');
bundler.module('scripts/graph.js','var running;exports.app={underbar:!0,type:"canvas",start:function(){running=!0;var app=this,canvas=this.elem;canvas.width=this.$.width(),canvas.height=this.$.height(),running=!0;var basegraph={},i;for(i=0;i<100;++i)basegraph[i]=[],basegraph[Math.random()*i|0].push(i);for(i=0;i<99;++i)Math.random()<.2&&basegraph[i].push(i+1);basegraph={};for(var x=0;x<6;++x)for(var y=0;y<6;++y)y===5||x===5?y!==x&&(basegraph[x+","+y]=[]):basegraph[x+","+y]=[x+1+","+y,x+","+(y+1)];for(i=0;i<40;++i)basegraph[i]=[],basegraph[Math.random()*i|0].push(i);basegraph[0].push("0,0");var id;for(id in basegraph)basegraph[id]={id:id,force:{x:0,y:0},velocity:{x:Math.random()-.5,y:Math.random()-.5},pos:{x:Math.random(),y:Math.random()},children:basegraph[id]};var graph=[];Object.keys(basegraph).forEach(function(id){basegraph[id].children=basegraph[id].children.map(function(child){return basegraph[child]}),graph.push(basegraph[id])}),console.log(graph);function vsub(a,b){return{x:a.x-b.x,y:a.y-b.y}}function vadd(a,b){return{x:a.x+b.x,y:a.y+b.y}}function vscale(k,a){return{x:a.x*k,y:a.y*k}}function dot(a,b){return a.x*b.x+a.y*b.y}function vlen(v){return Math.sqrt(v.x*v.x+v.y*v.y)}function norm(v){var l=vlen(v);return{x:v.x/l,y:v.y/l}}function dist(a,b){var t=vsub(a,b);return Math.sqrt(dot(t,t))}function vneg(v){return{x:-v.x,y:-v.y}}var spring=1e4,repuls=1e3,passt=0,gnum,timestep=.005,dampening=.99;function run(){passt>0&&(passt-=.01),graph.forEach(function(elem){elem.force={x:0,y:0}}),graph.forEach(function(a){a.children.forEach(function(b){var doit=Math.random()*Math.random()*4>passt;if(doit){var v=vsub(b.pos,a.pos),force=vscale(spring*.1*Math.min(vlen(v),100),v);a.force=vadd(a.force,force),b.force=vadd(b.force,vneg(force))}})});var doit=Math.random()*Math.random()*2>passt;graph.forEach(function(a){graph.forEach(function(b){if(a.id!==b.id&&doit){var v=norm(vsub(a.pos,b.pos)),d=dist(b.pos,a.pos);d<Math.PI/2&&(a.force=vadd(a.force,vscale(repuls*Math.cos(d),v)))}})}),graph.forEach(function(elem){elem.velocity=vscale(dampening,vadd(elem.velocity,vscale(timestep,elem.force)))}),graph.forEach(function(elem){var rescale=vlen(elem.velocity);elem.pos=vadd(elem.pos,vscale(timestep/Math.sqrt(1+rescale),elem.velocity))}),drawGraph(),running&&setTimeout(run,0)}run();function drawGraph(){var minx=Math.min.apply(undefined,graph.map(function(e){return e.pos.x})),miny=Math.min.apply(undefined,graph.map(function(e){return e.pos.y})),maxx=Math.max.apply(undefined,graph.map(function(e){return e.pos.x})),maxy=Math.max.apply(undefined,graph.map(function(e){return e.pos.y})),ctx=canvas.getContext("2d");function transform(a){return{x:(a.x-minx)/(maxx-minx)*canvas.width,y:(a.y-miny)/(maxy-miny)*canvas.height}}ctx.clearRect(0,0,canvas.width,canvas.height),ctx.beginPath();function line(a,b){ctx.lineWidth=3;var p1=transform(a);ctx.moveTo(p1.x,p1.y);var p2=transform(b);ctx.lineTo(p2.x,p2.y)}function dot(a){var p=transform(a.pos),sz=24;ctx.lineWidth=1,ctx.strokeRect(p.x-sz,p.y-sz,sz*2,sz*2),ctx.fillStyle="rgba(255,255,255,.7)",ctx.fillRect(p.x-sz+1,p.y-sz+1,sz*2-2,sz*2-2),ctx.fillStyle="#000",ctx.fillText(a.id,p.x-17,p.y)}graph.forEach(function(a){a.children.forEach(function(b){line(a.pos,b.pos)})}),ctx.stroke(),graph.forEach(function(a){dot(a)}),ctx.fillText(passt,0,20)}},stop:function(){running=!1}}');
bundler.module('scripts/sierp.js','exports.app={underbar:!0,type:"canvas",start:function(){var a,b,c,i,t;c=this.elem,a=c.getContext("2d"),c.width=c.height=1e3,t=999;for(b=[i=1];i<t*t;)(b[i+t]=b[i]^b[i++ -1])&&a.fillRect(i%t,i/t,1,1)}}');
bundler.module('scripts/listboxer.js','var tree;exports.app={underbar:!0,type:"canvas",start:function(){var canvas=this.elem;canvas.height=this.$.height(),canvas.width=this.$.width();var ctx=canvas.getContext("2d");treeParent(tree);function treeParent(tree,prev){Array.isArray(tree)&&(tree.parent=prev,tree.forEach(function(subtree){treeParent(subtree,tree)}))}var textsize=14;ctx.font=textsize+"px sans-serif",ctx.lineWidth=1,ctx.textBaseline="baseline",ctx.fillStyle="#ccc",ctx.fillRect(0,0,canvas.width,canvas.height),drawBox({val:tree,x:0,y:0,w:canvas.width,h:canvas.height});function drawBox(obj){var w=obj.w,h=obj.h,x=obj.x,y=obj.y,val=obj.val,size=lineSize(obj.val,obj.w);if(Array.isArray(val)){ctx.fillStyle="#"+(15790320|Math.random()*16777216).toString(16),ctx.fillStyle="#fff",ctx.fillRect(x,y,w,h),ctx.fillStyle="#000",ctx.fillStyle="#"+((16777215&Math.random()*16777216)+16777216).toString(16).slice(1),ctx.fillRect(x,y,10,1),ctx.fillRect(x,y+h-1,10,1),ctx.fillRect(x,y,1,h),ctx.fillStyle="#fff",ctx.fillStyle="#000",x+=4,y+=3,h-=6,w-=4;var x1=x+8,w1=x+8;for(var i=0;i<val.length;++i){var childSize=boxSize(val[i],w),child={x:x,y:y,h:childSize.h,w:w,val:val[i]};childSize.w<w?drawLine(child):drawBox(child),y+=childSize.h+2}return}ctx.fillText(val,x,y+textsize)}function boxSize(obj,w){var line=lineSize(obj);if(Array.isArray(obj)){if(obj.boxSize)return obj.boxSize;if(line.w>w&&Array.isArray(obj)){var h=2;for(var i=0;i<obj.length;++i)h+=boxSize(obj[i],w-4).h+2;obj.boxSize={w:w,h:h+4}}else obj.boxSize=line;return obj.boxSize}return line}function drawLine(obj){var size=lineSize(obj.val),x=obj.x,y=obj.y,h=obj.h,val=obj.val;y+=h-size.h,h=size.h;var w=size.w;if(Array.isArray(val)){ctx.fillStyle="#"+(15790320|Math.random()*16777216).toString(16),ctx.fillStyle="#fff",ctx.fillRect(x,y,w,h),ctx.fillStyle="#000",ctx.fillStyle="#"+((16777215&Math.random()*16777216)+16777216).toString(16).slice(1),ctx.fillRect(x,y+h,w,1),ctx.fillRect(x+w-1,y+h-textsize/2,1,textsize/2),ctx.fillRect(x,y+h-textsize/2,1,textsize/2),ctx.fillStyle="#fff",ctx.fillStyle="#000",x+=1,y+=0,h-=3;var pos=2;++x;for(var i=0;i<val.length;++i){var child=val[i],childsize=lineSize(val[i]);drawLine({val:child,x:x,y:y,h:h}),x+=childsize.w+3}return}ctx.fillText(val,x,y+textsize);return}function lineSize(val){Array.isArray(val)||(val=""+val);if(typeof val=="string")return{w:ctx.measureText(val).width,h:textsize};if(val.lineSize)return val.lineSize;if(Array.isArray(val)){var w=1,h=textsize;for(var i=0;i<val.length;++i){var size=lineSize(val[i]);w+=size.w+3,h=Math.max(h,size.h+3)}return val.lineSize={w:w,h:h},val.lineSize}throw"wrong type"}},stop:function(){tree=undefined}},tree=["do",["#","bug:","double","escaping","needed","-","both","for","js-strings","and","yolan","strings"],["def","tokenRegEx",["RegExp","call","RegExp","\x27\x5c\x5c\x5c\x5cs*(\x5c\x5c\x5c\x5c[|\x5c\x5c\x5c\x5c]|(\x5c\x5c\x5c\x5c\x5c\x5c\x5c\x5c.|[^\x5c\x5c\x5c\x5cs\x5c\x5c\x5c\x5c[\x5c\x5c\x5c\x5c]])+)\x27","\x27g\x27"]],["def","unescapeRegEx",["RegExp","call","RegExp","\x27\x5c\x5c\x5c\x5c\x5c\x5c\x5c\x5c(.)\x27","\x27g\x27"]],["def","yolan",["object"]],["yolan","set","tokenize",["fn",["str"],["def","result",["array"]],["str","replace","tokenRegEx",["fn",["_","token"],["result","push","token"]]],"result"]],["yolan","set","parse",["fn",["tokens"],["set","tokens",["tokens","reverse"]],["def","stack",["array"]],["def","current",["array","\x27do\x27"]],["while",["tokens","get","\x27length\x27"],["def","token",["tokens","pop"]],["cond",[["eq?","token","\x27[\x27"],["stack","push","current"],["set","current",["array"]]],[["eq?","token","\x27]\x27"],["def","t","current"],["set","current",["stack","pop"]],["current","push","t"]],["true",["current","push",["token","replace","unescapeRegEx",["fn",["_","a"],"a"]]]]]],"current"]],["def","compileJS",["object",["JsTypeOf",["fn",["syn","syn1"],["+","\x27typeof \x27","syn1"]]],["do",["fn",["syn"],[[["syn","slice","1"],"map",["yolan","get","\x27toJS\x27"]],"join","\x27;\x27"]]],["def",["fn",["syn","syn1"],["+","\x27var \x27","syn1","\x27=\x27",["yolan","toJS",["syn","get","2"]]]]],["set",["fn",["syn","syn1"],["+","syn1","\x27=\x27",["yolan","toJS",["syn","get","2"]]]]],["object",["fn",["syn","syn1"],["+","\x27{\x27",[[["syn","slice","1"],"map",["fn",["pair"],["+",["JSON","stringify",[["pair","get","0"],"toString"]],"\x27:\x27",["yolan","toJS",["pair","get","1"]]]]],"join","\x27,\x27"],"\x27}\x27"]]],["array",["fn",["syn","syn1"],["+","\x27[\x27",[[["syn","slice","1"],"map",["yolan","get","\x27toJS\x27"]],"join","\x27,\x27"],"\x27]\x27"]]],["fn",["fn",["syn","syn1"],["+","\x27function(\x27",["syn1","join","\x27,\x27"],"\x27){\x27",[[["syn","slice","2","-1"],"map",["yolan","get","\x27toJS\x27"]],"join","\x27;\x27"],"\x27;return \x27",["yolan","toJS",["syn","get",["-",["syn","get","\x27length\x27"],"1"]]],"\x27}\x27"]]],["while",["fn",["syn","syn1"],["+","\x27while(\x27",["yolan","toJS","syn1"],"\x27){\x27",[[["syn","slice","2"],"map",["yolan","get","\x27toJS\x27"]],"join","\x27;\x27"],"\x27}\x27"]]],["cond",["fn",["syn"],[[["syn","slice","1"],"map",["fn",["pair"],["+","\x27if(\x27",["yolan","toJS",["pair","get","0"]],"\x27){\x27",[[["pair","slice","1"],"map",["yolan","get","\x27toJS\x27"]],"join","\x27;\x27"],"\x27}\x27"]]],"join","\x27else \x27"]]],["#",["fn",[],"\x27\x27"]],["return",["fn",["syn","syn1"],["+","\x27return \x27",["yolan","toJS","syn1"]]]],["+",["fn",["syn"],[[["syn","slice","1"],"map",["yolan","get","\x27toJS\x27"]],"join","\x27+\x27"]]],["-",["fn",["syn"],[[["syn","slice","1"],"map",["yolan","get","\x27toJS\x27"]],"join","\x27-\x27"]]],["eq?",["fn",["syn","syn1"],["+",["yolan","toJS","syn1"],"\x27===\x27",["yolan","toJS",["syn","get","2"]]]]]]],["yolan","set","toJS",["fn",["syn"],["def","syn0",["syn","get","0"]],["def","syn1",["syn","get","1"]],["cond",[["eq?",["JsTypeOf","syn"],"\x27string\x27"],["return","syn"]],[["compileJS","get","syn0"],["return",[["compileJS","get","syn0"],"call","null","syn","syn1"]]],[["eq?","syn1","\x27set\x27"],["return",["+","syn0","\x27.\x27",["syn","get","2"],"\x27=\x27",["yolan","toJS",["syn","get","3"]]]]],[["eq?","syn1","\x27get\x27"],["return",["+","syn0","\x27[\x27",["yolan","toJS",["syn","get","2"]],"\x27]\x27"]]],[["eq?",["JsTypeOf","syn0"],"\x27string\x27"],["return",["+",["yolan","toJS","syn0"],"\x27.\x27","syn1","\x27(\x27",[[["syn","slice","2"],"map",["yolan","get","\x27toJS\x27"]],"join","\x27,\x27"],"\x27)\x27"]]]],["+",["yolan","toJS","syn0"],"\x27.\x27","syn1","\x27(\x27",[[["syn","slice","2"],"map",["yolan","get","\x27toJS\x27"]],"join","\x27,\x27"],"\x27)\x27"]]],[["require","call","null","\x27fs\x27"],"readFile","\x27yolan.yl\x27","\x27utf8\x27",["fn",["err","data"],["#","console","log",["JSON","stringify",["yolan","tokenize","data"]]],["#","console","log",["yolan","parse",["yolan","tokenize","data"]]],["#","console","log",["yolan","toJS",["yolan","parse",["yolan","tokenize","data"]]]],["console","log",["JSON","stringify",["yolan","parse",["yolan","tokenize","data"]]]]]]]');
bundler.module('scripts/brown.js','exports.app={underbar:!0,type:"canvas",start:function(){var c=this.elem;a=c.getContext("2d"),c.width=c.height=128,d=a.getImageData(p=0,0,128,128),setInterval("for(i=k=66055;--i;d.data[p%k]++)p+=Math.random()*k*k&k;a.putImageData(d,0,0)",50)},stop:function(){var i,t;t=setInterval(function(){},1e4);for(i=0;i<=t;++i)clearInterval(i)}}');
bundler.module('scripts/plasma.js','exports.app={underbar:!0,type:"canvas",start:function(){var size=128,canvas=this.elem;canvas.width=canvas.height=size;var ctx=canvas.getContext("2d"),img=ctx.createImageData(size,size);setTimeout(function(){drawPlasma(0)},0),setTimeout(function(){drawPlasma(1)},0),setTimeout(function(){drawPlasma(2)},0);function drawPlasma(color){var p=diamondSquare(size),min=p.reduce(function(a,b){return a<b?a:b},Infinity),max=p.reduce(function(a,b){return a>b?a:b},-Infinity);for(var i=0;i<img.data.length>>2;++i)img.data[i*4+color]=(p[i]-min)*256/(max-min),img.data[i*4+3]=255;ctx.putImageData(img,0,0)}}};function diamondSquare(size,rnd){var step,x,y,sizeMask,result;if(size&size-1!==0)throw{error:"size parameter must be a power of two"};typeof rnd!="function"&&(rnd=function(scale){return(Math.random()-.5)*scale}),result=[0],sizeMask=size-1;function get(x,y){return result[(x&sizeMask)+(y&sizeMask)*size]}for(step=size;step>0;step>>=1){var prevStepMask=(step<<1)-1;for(x=0;x<size;x+=step)for(y=0;y<size;y+=step)y&prevStepMask&&x&prevStepMask&&(result[x+y*size]=(get(x-step,y-step)+get(x+step,y+step)+get(x+step,y-step)+get(x-step,y+step))/4+rnd(step));for(x=0;x<size;x+=step)for(y=0;y<size;y+=step)if(!(y&prevStepMask)&&x&prevStepMask||!(x&prevStepMask)&&y&prevStepMask)result[x+y*size]=(get(x-step,y)+get(x+step,y)+get(x,y-step)+get(x,y+step))/4+rnd(step)}return result}');
bundler.module('scripts/bidiv.js','var util=require("util"),webutil=require("webutil"),console=require("console"),_=require("underscore"),$=require("zquery"),menuRaw=["#source/bidiv","#source/bundler","#source/fullbrows","#source/jsxml","#source/main","#source/menu","#source/server","#source/showSource","#source/util","#source/webutil","#notes/browser_platforms","#notes/c9ender","#notes/coffee","#notes/grapla","#notes/htmlnotes","#notes/jam-rep","#notes/javascript","#notes/jekyll","#notes/js","#notes/lightscriptapi","#notes/notedump","#notes/notes","#notes/oauth2.html","#notes/oauth2","#notes/socnet","#notes/tango","#notes/ted","#notes/toastmasters2","#notes/vim","/dkcities","/notescore","/planetcute"];function makeTree(list){if(list.length===0)throw"argh";if(list.length===1)return list[0];if(list.length===2)return list;var pos=1+util.pseudoRandom()%(list.length-1);return console.log(list.length,pos),[makeTree(list.slice(0,pos)),makeTree(list.slice(pos))]}var tree;function layoutTree(tree,$dom,x,y,w,h,dir){if(typeof tree=="string"){var $elem=$("<div>").css("position","absolute").css("left",x+1).css("top",y+1).css("padding","0px 4px 0px 4px").css("margin",0).css("width",Math.max(0,w-10)).css("height",Math.max(0,h-2)).css("background-color",util.colorHash(tree)).text(tree.replace("/"," ").replace("#",""));$dom.append($elem),webutil.scaleText($elem)}else{var x0=x,x1=x,y0=y,y1=y,w0=w,w1=w,h0=h,h1=h;dir&1?(w0>>=1,x1=x+w0,w1=w-w0):(h0>>=1,y1=y+h0,h1=h-h0),layoutTree(tree[0],$dom,x0,y0,w0,h0,dir+1),layoutTree(tree[1],$dom,x1,y1,w1,h1,dir+1)}}exports.app={start:function(){util.pseudoRandom(1e3),tree=makeTree(menuRaw.concat(menuRaw).concat(menuRaw).concat(menuRaw)),tree=makeTree(menuRaw),this.update()},update:function(){var $dom=this.$;$dom.html(""),layoutTree(tree,$dom,0,0,$dom.width(),$dom.height(),0),webutil.scaleText($dom.find("div"))}}');
bundler.module('scripts/webutil.js','var window=require("window"),$=require("zquery"),_=require("underscore");exports.windowHeight=function(){var height=$(window).height();if(height===356||height===208)height+=60;return height};function binsearch(a,b,fn){if(a>=b)return a;var t=a+b+1>>1;return fn(t)?binsearch(a,t-1,fn):binsearch(t,b,fn)}exports.scaleText=function($elems){_($elems).each(function(elem){var $elem=$(elem),h=$elem.height(),size=parseInt($elem.css("font-size"),10);$elem.css("overflow","hidden"),binsearch(2,Math.min($elem.height()>>1,100),function(size){return $elem.css("font-size",size),elem.scrollHeight>elem.clientHeight||elem.scrollWidth>elem.clientWidth}),$elem.css("height",h)})}');
bundler.module('scripts/fullbrows.js','var util=require("util"),webutil=require("webutil"),$=require("zquery"),window=require("window"),Modernizr=require("modernizr"),app={};function l(e){return console.log(e),e}function relayoutStyle(){var vbar=$(window).width()>$(window).height(),barsize=app.mobile?10:8;$("#bar").css({position:"fixed",left:vbar?100-barsize+"%":"0px",top:"0px",margin:0,padding:0,overflow:"visible",width:vbar?barsize+"%":"100%",height:vbar?"100%":barsize+"%"});var iconsize=vbar?$("#bar").width():$("#bar").height(),barItemStyle={width:iconsize*.6,height:iconsize*.6,"-webkit-box-shadow":"0px 0px 32px rgba(255, 255, 255, 1), 2px 2px 14px rgba(0, 0, 0, .7)","-moz-box-shadow":"0px 0px 32px rgba(255, 255, 255, 1), 2px 2px 14px rgba(0, 0, 0, .7)","-o-box-shadow":"0px 0px 32px rgba(255, 255, 255, 1), 2px 2px 14px rgba(0, 0, 0, .7)","box-shadow":"0px 0px 32px rgba(255, 255, 255, 1), 2px 2px 14px rgba(0, 0, 0, .7)",background:"rgba(255,255,255,1)",border:iconsize*.02+"px solid #000",verticalAlign:"top",textAlign:"center",fontFamily:"Ubuntu Condensed",padding:iconsize*.1,borderRadius:iconsize*.2,marginLeft:iconsize*.1,marginBottom:iconsize*.1,marginRight:iconsize*.1,marginTop:iconsize*.1};$("#bar img").css(barItemStyle),require("webutil").scaleText($("#bar span")),$("#bar span").css(barItemStyle),$("#barleft img").css("float","left"),$("#barleft span").css("float","left"),$("#barright img").css("float","right"),$("#barright span").css("float","right"),vbar?($("#barright").css({width:iconsize,position:"fixed"}),$("#barright").css({position:"fixed",top:$("#bar").height()-$("#barright").height()})):$("#barright").css({position:"static",width:"auto",top:"auto"}),app.underbar&&(barsize=0,vbar=!0),$("#content").css("position","absolute").css("left",0).css("top",vbar?1:barsize+"%").css("overflow","visible").css("width",vbar?100-barsize+"%":"100%").css("margin-top",1).css("height",app.type==="scrollable"?"auto":vbar?"100%":100-barsize+"%"),window.scrollTo(0,1)}exports.addButton=addButton;function addButton(obj){var pos=obj.pos==="right"?"#barright":"#barleft",button;obj.imagePath?button=$(\x27<img src="\x27+obj.imagePath+\x27">\x27):button=$("<span>").text(obj.text),$(pos).append(button),obj.id&&button.attr("id",obj.id),console.log(button);try{button.on("mousedown touchstart",function(e){return typeof obj.callback=="function"&&obj.callback(),e.preventDefault(),!1})}catch(e){}relayoutStyle()}function relayout(){typeof app.update=="function"&&app.update(),relayoutStyle(),window.scrollTo(0,1)}var relayoutDelayed=util.niceSingle(relayout),isMobile=window.isMobile||!!window.navigator.userAgent.match(/mobile/i);exports.start=function(opt){typeof app.stop=="function"&&app.stop(),app=opt||{},app.type=app.type||"fullscreen",app.mobile===undefined&&(app.mobile=isMobile),$("#content").remove(),app.type==="canvas"?$("body").append(\x27<canvas id="content">Error: canvas not supported, please update to a modern browser.</canvas>\x27):$("body").append(\x27<div id="content"></div>\x27),$("#bar").remove(),$("body").append(\x27<div id="bar"></div>\x27),$("#bar").html(\x27<div id="barleft"></div><div id="barright"></div>\x27),app.hideButtons?relayoutStyle():(addButton({imagePath:"img/home.png",pos:"right",callback:function(){window.location.hash=""}}),window.location.hash.slice(0,7)==="#source"?addButton({text:"run",id:"sourcebutton",pos:"right",callback:function(){window.location.hash="#"+window.location.hash.slice(8)}}):addButton({text:"code",id:"sourcebutton",pos:"right",callback:function(){window.location.hash="#source/"+window.location.hash.slice(1)}})),app.$=$("#content"),app.elem=app.$[0],Modernizr.touch?($("#addressbarfillerdisable").remove(),$("body").append(\x27<div id="addressbarfillerdisable" style="height:\x27+(Math.max(webutil.windowHeight(),$(window).width())+62)+\x27px;"></div>\x27)):app.type==="scrollable"?$("body").css("overflow","auto"):$("body").css("overflow","hidden"),$(window).bind("resize",relayoutDelayed),$(window).bind("orientationchange",relayoutDelayed),$("body").css({webkitTransition:"background 1s",transition:"background 1s",background:"#fff"}),app.start=app.start||app.update,app.start(),relayoutStyle()},exports.startFn=function(app){return console.log(1),function(){console.log(2),exports.start(app)}}');
bundler.require("combigame").run();